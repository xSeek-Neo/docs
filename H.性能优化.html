<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从输入URL到页面展示的完整过程 | 葵花寶典</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="../favicon.ico">
    <link rel="manifest" href="../manifest.json">
    <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#2486b9">
    <meta name="description" content="业精于勤荒于嬉，行成于思毁于随">
    <meta name="theme-color" content="#ffffff">
    <meta name="author" content="Dendi">
    <meta name="keywords" content="vue面试题 面试题 js面试题 css面试题 React面试题 2025前端面试题">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/docs/assets/css/0.styles.a9377658.css" as="style"><link rel="preload" href="/docs/assets/js/app.087761fe.js" as="script"><link rel="preload" href="/docs/assets/js/2.959c8da4.js" as="script"><link rel="preload" href="/docs/assets/js/1.310dd804.js" as="script"><link rel="preload" href="/docs/assets/js/34.b7be3ad7.js" as="script"><link rel="preload" href="/docs/assets/js/21.cb775a35.js" as="script"><link rel="prefetch" href="/docs/assets/js/11.b5971ed6.js"><link rel="prefetch" href="/docs/assets/js/12.df494d0c.js"><link rel="prefetch" href="/docs/assets/js/13.ed3696cc.js"><link rel="prefetch" href="/docs/assets/js/14.5a912372.js"><link rel="prefetch" href="/docs/assets/js/15.f5749a7f.js"><link rel="prefetch" href="/docs/assets/js/16.d88a2e4c.js"><link rel="prefetch" href="/docs/assets/js/17.2239bfee.js"><link rel="prefetch" href="/docs/assets/js/18.e92dd762.js"><link rel="prefetch" href="/docs/assets/js/19.6d685711.js"><link rel="prefetch" href="/docs/assets/js/20.740c71f6.js"><link rel="prefetch" href="/docs/assets/js/22.df72b290.js"><link rel="prefetch" href="/docs/assets/js/23.a936b857.js"><link rel="prefetch" href="/docs/assets/js/24.f66c2a95.js"><link rel="prefetch" href="/docs/assets/js/25.182b4ffb.js"><link rel="prefetch" href="/docs/assets/js/26.7543e24f.js"><link rel="prefetch" href="/docs/assets/js/27.fc3633d7.js"><link rel="prefetch" href="/docs/assets/js/28.5f473c5e.js"><link rel="prefetch" href="/docs/assets/js/29.1ceb8156.js"><link rel="prefetch" href="/docs/assets/js/3.940bfe8a.js"><link rel="prefetch" href="/docs/assets/js/30.ff7d69b0.js"><link rel="prefetch" href="/docs/assets/js/31.e2318a1e.js"><link rel="prefetch" href="/docs/assets/js/32.209d1054.js"><link rel="prefetch" href="/docs/assets/js/33.8e11759c.js"><link rel="prefetch" href="/docs/assets/js/35.bba5649d.js"><link rel="prefetch" href="/docs/assets/js/36.0d37c7ee.js"><link rel="prefetch" href="/docs/assets/js/37.292a84f5.js"><link rel="prefetch" href="/docs/assets/js/38.2f0c8fb9.js"><link rel="prefetch" href="/docs/assets/js/39.6d8bcb51.js"><link rel="prefetch" href="/docs/assets/js/4.89a06391.js"><link rel="prefetch" href="/docs/assets/js/40.0a22be58.js"><link rel="prefetch" href="/docs/assets/js/41.de49f4c6.js"><link rel="prefetch" href="/docs/assets/js/42.a7376ab9.js"><link rel="prefetch" href="/docs/assets/js/5.55c1efc0.js"><link rel="prefetch" href="/docs/assets/js/6.f8f31b67.js"><link rel="prefetch" href="/docs/assets/js/7.500fab81.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.d9dffa33.js"><link rel="prefetch" href="/docs/assets/js/vendors~flowchart.d7dffb21.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.a9377658.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="葵花寶典" class="logo"> <span class="site-name can-hide">葵花寶典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料💾" class="dropdown-title"><span class="title">学习资料💾</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料💾" class="mobile-dropdown-title"><span class="title">学习资料💾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://es6.ruanyifeng.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6 入门教程-阮一峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverFlow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://interview.poetries.top/docs/base.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  未来博客面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.bookstack.cn/read/CS-Interview-Knowledge-Map/README.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIT" class="dropdown-title"><span class="title">GIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIT" class="mobile-dropdown-title"><span class="title">GIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xSeek-Neo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/docs/K.GIT.html" class="nav-link">
  GIT常用命令
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料💾" class="dropdown-title"><span class="title">学习资料💾</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料💾" class="mobile-dropdown-title"><span class="title">学习资料💾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://es6.ruanyifeng.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6 入门教程-阮一峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  StackOverFlow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://interview.poetries.top/docs/base.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  未来博客面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.bookstack.cn/read/CS-Interview-Knowledge-Map/README.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIT" class="dropdown-title"><span class="title">GIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIT" class="mobile-dropdown-title"><span class="title">GIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/xSeek-Neo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/docs/K.GIT.html" class="nav-link">
  GIT常用命令
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/A.HTML5.html" class="sidebar-link">HTML5</a></li><li><a href="/docs/B.CSS3.html" class="sidebar-link">CSS3</a></li><li><a href="/docs/C.ES.html" class="sidebar-link">ES基础进阶</a></li><li><a href="/docs/D.异步并发.html" class="sidebar-link">异步与并发</a></li><li><a href="/docs/E.浏览器相关.html" class="sidebar-link">浏览器相关</a></li><li><a href="/docs/F.框架.VUE.html" class="sidebar-link">VUE</a></li><li><a href="/docs/F.框架.REACT.html" class="sidebar-link">REACT</a></li><li><a href="/docs/F.框架.NEXT.html" class="sidebar-link">NEXT</a></li><li><a href="/docs/G.工程化构建.html" class="sidebar-link">工程化构建</a></li><li><a href="/docs/H.性能优化.html" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#完整流程概览" class="sidebar-link">完整流程概览</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#一、url-解析与预处理阶段" class="sidebar-link">一、URL 解析与预处理阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-url-解析-第一步" class="sidebar-link">1. URL 解析（第一步）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-查找浏览器缓存-强缓存检查" class="sidebar-link">2. 查找浏览器缓存（强缓存检查）</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#二、网络请求阶段" class="sidebar-link">二、网络请求阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-dns-解析-domain-name-system" class="sidebar-link">1. DNS 解析（Domain Name System）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-建立-tcp-连接-三次握手" class="sidebar-link">2. 建立 TCP 连接（三次握手）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-tls-握手-仅-https" class="sidebar-link">3. TLS 握手（仅 HTTPS）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-浏览器组装-http-请求报文" class="sidebar-link">4. 浏览器组装 HTTP 请求报文</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-发送-http-请求" class="sidebar-link">5. 发送 HTTP 请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#三、服务器处理阶段" class="sidebar-link">三、服务器处理阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-服务器接收与路由" class="sidebar-link">1. 服务器接收与路由</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-请求处理流程" class="sidebar-link">2. 请求处理流程</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-返回-http-响应" class="sidebar-link">3. 返回 HTTP 响应</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#四、浏览器接收响应阶段" class="sidebar-link">四、浏览器接收响应阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-接收-http-响应" class="sidebar-link">1. 接收 HTTP 响应</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-处理重定向" class="sidebar-link">2. 处理重定向</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-处理缓存响应" class="sidebar-link">3. 处理缓存响应</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-解压响应内容" class="sidebar-link">4. 解压响应内容</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-开始解析-html" class="sidebar-link">5. 开始解析 HTML</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#五、浏览器渲染阶段-核心重点" class="sidebar-link">五、浏览器渲染阶段（核心重点）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#渲染流程概览" class="sidebar-link">渲染流程概览</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-构建-dom-树-dom-tree" class="sidebar-link">1. 构建 DOM 树（DOM Tree）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-构建-cssom-树-css-object-model" class="sidebar-link">2. 构建 CSSOM 树（CSS Object Model）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-生成渲染树-render-tree" class="sidebar-link">3. 生成渲染树（Render Tree）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-布局-layout-reflow-回流" class="sidebar-link">4. 布局（Layout / Reflow 回流）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-绘制-painting-repaint-重绘" class="sidebar-link">5. 绘制（Painting / Repaint 重绘）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_6-layerize-分层" class="sidebar-link">6. Layerize（分层）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_7-compositing-合成" class="sidebar-link">7. Compositing（合成）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#渲染性能优化总结" class="sidebar-link">渲染性能优化总结</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#关键概念对比" class="sidebar-link">关键概念对比</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#六、后续阶段" class="sidebar-link">六、后续阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-资源加载时机" class="sidebar-link">1. 资源加载时机</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-javascript-执行与事件处理" class="sidebar-link">2. JavaScript 执行与事件处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#回答思路" class="sidebar-link">回答思路</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_0-web性能核心指标" class="sidebar-link">0.WEB性能核心指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-loading-加载-别让我等太久" class="sidebar-link">1. Loading（加载）：别让我等太久！</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-interaction-交互-别卡得像-ppt" class="sidebar-link">2. Interaction（交互）：别卡得像 PPT！</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-visual-stability-视觉稳定性-别乱动" class="sidebar-link">3. Visual Stability（视觉稳定性）：别乱动！</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#web-vitals-核心指标-google推荐" class="sidebar-link">Web Vitals 核心指标（Google推荐）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#其他重要指标" class="sidebar-link">其他重要指标</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#一、网络层面优化" class="sidebar-link">一、网络层面优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-dns-预解析-dns-prefetch" class="sidebar-link">1. DNS 预解析（DNS Prefetch）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-预连接-preconnect" class="sidebar-link">2. 预连接（Preconnect）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-预加载-preload" class="sidebar-link">3. 预加载（Preload）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-域名收敛" class="sidebar-link">4. 域名收敛</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-使用-cdn-加速" class="sidebar-link">5. 使用 CDN 加速</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_6-http-2-或-http-3" class="sidebar-link">6. HTTP/2 或 HTTP/3</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_7-优化-http-缓存策略" class="sidebar-link">7. 优化 HTTP 缓存策略</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_8-资源压缩" class="sidebar-link">8. 资源压缩</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_9-接口请求优化" class="sidebar-link">9. 接口请求优化</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#二、渲染层面优化" class="sidebar-link">二、渲染层面优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-关键渲染路径优化" class="sidebar-link">1. 关键渲染路径优化</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-javascript-加载优化" class="sidebar-link">2. JavaScript 加载优化</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-减少-dom-操作" class="sidebar-link">3. 减少 DOM 操作</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-使用虚拟列表" class="sidebar-link">4. 使用虚拟列表</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-服务端渲染-ssr" class="sidebar-link">5. 服务端渲染（SSR）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_6-骨架屏和-loading" class="sidebar-link">6. 骨架屏和 Loading</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#三、javascript-代码优化" class="sidebar-link">三、JavaScript 代码优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-事件委托-event-delegation" class="sidebar-link">1. 事件委托（Event Delegation）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-防抖-debounce-和节流-throttle" class="sidebar-link">2. 防抖（Debounce）和节流（Throttle）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-使用-web-worker" class="sidebar-link">3. 使用 Web Worker</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-计算结果缓存" class="sidebar-link">4. 计算结果缓存</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-动画优化" class="sidebar-link">5. 动画优化</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_6-避免内存泄漏" class="sidebar-link">6. 避免内存泄漏</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#四、css-优化-减少重绘和回流" class="sidebar-link">四、CSS 优化（减少重绘和回流）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-避免触发回流-reflow" class="sidebar-link">1. 避免触发回流（Reflow）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-避免触发重绘-repaint" class="sidebar-link">2. 避免触发重绘（Repaint）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-使用-css3-硬件加速" class="sidebar-link">3. 使用 CSS3 硬件加速</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-优化选择器" class="sidebar-link">4. 优化选择器</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-减少-css-文件数量和大小" class="sidebar-link">5. 减少 CSS 文件数量和大小</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#五、资源优化" class="sidebar-link">五、资源优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-图片优化" class="sidebar-link">1. 图片优化</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-字体优化" class="sidebar-link">2. 字体优化</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#六、构建打包优化" class="sidebar-link">六、构建打包优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-代码分割-code-splitting" class="sidebar-link">1. 代码分割（Code Splitting）</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-tree-shaking" class="sidebar-link">2. Tree Shaking</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-代码压缩" class="sidebar-link">3. 代码压缩</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-公共代码提取" class="sidebar-link">4. 公共代码提取</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_5-cdn-加载第三方模块" class="sidebar-link">5. CDN 加载第三方模块</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_6-多线程打包" class="sidebar-link">6. 多线程打包</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#七、框架特定优化" class="sidebar-link">七、框架特定优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#react-优化" class="sidebar-link">React 优化</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#vue-优化" class="sidebar-link">Vue 优化</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#八、首屏优化策略" class="sidebar-link">八、首屏优化策略</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#九、性能监控工具" class="sidebar-link">九、性能监控工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_1-chrome-devtools" class="sidebar-link">1. Chrome DevTools</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_2-lighthouse" class="sidebar-link">2. Lighthouse</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_3-webpagetest" class="sidebar-link">3. WebPageTest</a></li><li class="sidebar-sub-header"><a href="/docs/H.性能优化.html#_4-pagespeed-insights" class="sidebar-link">4. PageSpeed Insights</a></li></ul></li></ul></li><li><a href="/docs/S.性能监控.html" class="sidebar-link">性能监控SDK</a></li><li><a href="/docs/I.HTTP协议.html" class="sidebar-link">HTTP协议</a></li><li><a href="/docs/K.综合场景题.html" class="sidebar-link">综合场景题</a></li><li><a href="/docs/L.THIS.html" class="sidebar-link">THIS</a></li><li><a href="/docs/N.DOM.html" class="sidebar-link">DOM</a></li><li><a href="/docs/R.BOM.html" class="sidebar-link">BOM</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="从输入url到页面展示的完整过程">从输入URL到页面展示的完整过程</h1> <h2 id="完整流程概览">完整流程概览</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>用户输入 URL
    ↓
URL 解析与处理
    ↓
查找浏览器缓存（强缓存）
    ↓
DNS 解析
    ↓
建立 TCP 连接
    ↓
TLS 握手（HTTPS）
    ↓
发送 HTTP 请求
    ↓
服务器处理与响应
    ↓
接收 HTTP 响应
    ↓
解析 HTML、CSS、JS
    ↓
构建 DOM 树、CSSOM 树
    ↓
构建渲染树
    ↓
布局（Layout）
    ↓
绘制（Paint）
    ↓
合成（Composite）
    ↓
页面显示
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="一、url-解析与预处理阶段">一、URL 解析与预处理阶段</h2> <h3 id="_1-url-解析-第一步">1. URL 解析（第一步）</h3> <p><strong>浏览器首先解析 URL 中的各个组成部分：</strong></p> <ul><li><strong>协议（Protocol）</strong>：HTTP / HTTPS / FTP 等</li> <li><strong>域名（Domain）</strong>：如 <code>www.example.com</code></li> <li><strong>端口号（Port）</strong>：默认 HTTP 为 80，HTTPS 为 443</li> <li><strong>路径（Path）</strong>：如 <code>/index.html</code></li> <li><strong>查询参数（Query）</strong>：如 <code>?id=123&amp;name=test</code></li> <li><strong>锚点（Hash）</strong>：如 <code>#section1</code>（不会发送到服务器）</li></ul> <p><strong>特殊处理：</strong></p> <ul><li>如果输入的内容不是一个合法 URL，浏览器通常会将其交由<strong>默认搜索引擎处理</strong>（如 Google、百度）</li> <li>如果输入的是域名但没有协议，浏览器会自动补全协议（通常是 HTTPS）</li> <li>如果输入的是 IP 地址，会直接使用该 IP，跳过 DNS 解析</li></ul> <p><strong>示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>输入：example.com
解析后：https://example.com/（自动补全协议和路径）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-查找浏览器缓存-强缓存检查">2. 查找浏览器缓存（强缓存检查）</h3> <p><strong>在发起网络请求之前，浏览器会先检查缓存：</strong></p> <p><strong>缓存查找顺序：</strong></p> <ol><li><strong>Memory Cache</strong>：内存缓存，关闭标签页后失效</li> <li><strong>Disk Cache</strong>：磁盘缓存，持久化存储</li></ol> <p><strong>缓存判断逻辑：</strong></p> <ul><li><strong>未缓存</strong>：发起新请求</li> <li><strong>已缓存且新鲜</strong>：直接使用缓存，<strong>跳过网络请求</strong></li> <li><strong>已缓存但过期</strong>：携带验证信息（<code>If-None-Match</code>、<code>If-Modified-Since</code>）发起协商缓存请求</li></ul> <p><strong>网络中的缓存层级：</strong></p> <p>除了浏览器缓存，网络请求在到达源服务器之前，还可能经过多层缓存：</p> <ol><li><p><strong>路由器缓存</strong></p> <ul><li><strong>DNS 缓存</strong>：路由器会缓存 DNS 查询结果，减少 DNS 解析时间</li> <li><strong>HTTP 缓存</strong>：部分企业级路由器支持 HTTP 代理缓存，可以缓存 HTTP 响应</li> <li><strong>特点</strong>：缓存时间通常较短，主要用于局域网内多设备共享</li></ul></li> <li><p><strong>CDN 缓存（内容分发网络）</strong></p> <ul><li><strong>边缘节点缓存</strong>：CDN 在全球各地部署边缘节点，缓存静态资源（HTML、CSS、JS、图片等）</li> <li><strong>缓存策略</strong>：根据 <code>Cache-Control</code> 响应头决定是否缓存
<ul><li><code>public</code>：CDN 可以缓存</li> <li><code>private</code>：CDN 不缓存</li> <li><code>max-age</code>：控制缓存有效期</li></ul></li> <li><strong>优势</strong>：
<ul><li>就近访问：用户从最近的 CDN 节点获取资源，大幅减少延迟</li> <li>减轻源服务器压力：大部分请求由 CDN 节点响应，无需回源</li> <li>提升加载速度：CDN 节点通常带宽充足，传输速度快</li></ul></li> <li><strong>缓存更新</strong>：
<ul><li>通过文件版本号或 hash（如 <code>app.v1.2.3.js</code>）实现缓存更新</li> <li>使用 <code>Cache-Control: max-age</code> 控制缓存时间</li> <li>支持手动刷新 CDN 缓存（Purge）</li></ul></li></ul></li> <li><p><strong>ISP 缓存</strong></p> <ul><li>部分 ISP（互联网服务提供商）会在其网络中缓存热门资源</li> <li>透明代理缓存，用户通常无感知</li></ul></li> <li><p><strong>反向代理缓存（如 Nginx）</strong></p> <ul><li>服务器端的反向代理可以缓存响应</li> <li>减少后端服务器压力，提升响应速度</li></ul></li></ol> <p><strong>完整的缓存流程：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用户请求
  ↓
浏览器缓存（Memory/Disk Cache）
  ↓（未命中）
路由器缓存（DNS/HTTP）
  ↓（未命中）
CDN 缓存（边缘节点）
  ↓（未命中）
反向代理缓存（Nginx）
  ↓（未命中）
源服务器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>缓存控制机制：</strong></p> <ul><li><strong>HTTP/1.0</strong>：<code>Expires</code> 头（绝对时间）</li> <li><strong>HTTP/1.1</strong>：<code>Cache-Control</code> 头（推荐使用）</li></ul> <p><strong>Cache-Control 常用指令：</strong></p> <ul><li><code>max-age=&lt;seconds&gt;</code>：缓存有效期（秒）</li> <li><code>public</code>：可被任何缓存（浏览器、CDN）缓存</li> <li><code>private</code>：仅浏览器缓存，不被共享缓存缓存</li> <li><code>no-cache</code>：使用前必须验证（协商缓存）</li> <li><code>no-store</code>：不缓存，每次从服务器获取</li> <li><code>must-revalidate</code>：过期后必须验证</li> <li><code>immutable</code>：资源不变，无需验证（适用于带版本号的静态资源）</li></ul> <p><strong>缓存验证（协商缓存）：</strong></p> <ul><li>验证请求头：<code>If-None-Match</code>（ETag）、<code>If-Modified-Since</code>（Last-Modified）</li> <li>服务器响应：<code>304 Not Modified</code>（使用缓存）或 <code>200 OK</code>（返回新资源）</li></ul> <p><strong>缓存策略建议：</strong></p> <p><strong>1. 静态资源（JS/CSS/图片/字体等）</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">public, max-age=31536000, immutable</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>使用文件版本号或 hash（如 <code>app.abc123.js</code>）</li> <li>长期缓存（1年），资源不变时无需验证</li></ul> <p><strong>2. HTML 文件</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache, must-revalidate</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>不缓存或短期缓存，确保及时获取更新</li> <li>每次使用前验证，保证内容最新</li></ul> <p><strong>3. API 响应（数据接口）</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">private, max-age=300, stale-while-revalidate=3600</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>短期缓存（5分钟），过期后后台更新</li> <li>使用 <code>private</code> 避免共享缓存</li></ul> <p><strong>4. 用户相关数据</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">private, max-age=3600</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>仅浏览器缓存，不共享</li> <li>根据数据更新频率设置缓存时间</li></ul> <p><strong>5. 敏感数据</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-store, no-cache, must-revalidate</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>完全不缓存，每次从服务器获取</li></ul> <p><strong>最佳实践：</strong></p> <ul><li>静态资源使用版本号/hash，设置长期缓存</li> <li>HTML 使用协商缓存，确保及时更新</li> <li>API 数据根据更新频率设置合适的缓存时间</li> <li>利用 <code>stale-while-revalidate</code> 提升用户体验</li></ul> <h2 id="二、网络请求阶段">二、网络请求阶段</h2> <h3 id="_1-dns-解析-domain-name-system">1. DNS 解析（Domain Name System）</h3> <p><strong>DNS 的作用是将域名转换为服务器的 IP 地址。</strong></p> <p><strong>DNS 查询顺序（递归查询）：</strong></p> <ol><li><strong>浏览器缓存</strong>：检查浏览器自身的 DNS 缓存</li> <li><strong>操作系统缓存</strong>：检查 <code>hosts</code> 文件和系统 DNS 缓存</li> <li><strong>路由器缓存</strong>：检查路由器 DNS 缓存</li> <li><strong>ISP DNS 缓存</strong>：检查 ISP（互联网服务提供商）的 DNS 服务器缓存</li> <li><strong>DNS 递归查询</strong>：
<ul><li>从根域名服务器开始查询</li> <li>逐级查询：<code>.com</code> → <code>example.com</code> → <code>www.example.com</code></li> <li>最终返回 IP 地址</li> <li><strong>可能存在负载均衡，导致每次 IP 不一样</strong></li></ul></li></ol> <p><strong>为什么是逐级查询？</strong></p> <p>DNS 采用<strong>分层树状结构</strong>，每个域名服务器只负责自己管辖的域名区域：</p> <ol><li><strong>根域名服务器（Root DNS）</strong>：全球共 13 组根服务器，负责顶级域名（<code>.com</code>、<code>.org</code>、<code>.cn</code> 等）</li> <li><strong>顶级域名服务器（TLD DNS）</strong>：负责二级域名（如 <code>.com</code> 下的所有域名）</li> <li><strong>权威域名服务器（Authoritative DNS）</strong>：负责具体域名的解析（如 <code>baidu.com</code>）</li></ol> <p><strong>查询过程（以 <code>www.baidu.com</code> 为例）：</strong></p> <p><strong>面试时这样表达：</strong></p> <blockquote><p>&quot;当浏览器要访问 www.baidu.com 时，DNS 解析是逐级查询的：</p> <ol><li><strong>第一步</strong>：客户端向本地 ISP 的 DNS 服务器发起查询</li> <li><strong>第二步</strong>：ISP DNS 服务器不知道，就去问根域名服务器：&quot;www.baidu.com 的 IP 是多少？&quot;</li> <li><strong>第三步</strong>：根服务器回答：&quot;我不知道具体 IP，但我知道 .com 的服务器地址，你去问它&quot;，然后返回 .com 服务器的地址</li> <li><strong>第四步</strong>：ISP DNS 去问 .com 服务器：&quot;www.baidu.com 的 IP 是多少？&quot;</li> <li><strong>第五步</strong>：.com 服务器回答：&quot;我不知道具体 IP，但我知道 baidu.com 的权威服务器地址，你去问它&quot;</li> <li><strong>第六步</strong>：ISP DNS 去问 baidu.com 的权威服务器：&quot;www.baidu.com 的 IP 是多少？&quot;</li> <li><strong>第七步</strong>：权威服务器返回最终 IP 地址，比如 39.156.66.10</li> <li><strong>第八步</strong>：ISP DNS 把 IP 返回给客户端，并缓存这个结果&quot;</li></ol></blockquote> <p><strong>流程图：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>客户端 → ISP DNS 服务器
  ↓
ISP DNS → 根服务器：&quot;www.baidu.com 的 IP？&quot;
  ↓
根服务器：&quot;去问 .com 服务器&quot;（返回 .com 服务器地址）
  ↓
ISP DNS → .com 服务器：&quot;www.baidu.com 的 IP？&quot;
  ↓
.com 服务器：&quot;去问 baidu.com 的权威服务器&quot;（返回权威服务器地址）
  ↓
ISP DNS → baidu.com 权威服务器：&quot;www.baidu.com 的 IP？&quot;
  ↓
权威服务器：&quot;IP 是 39.156.66.10&quot;
  ↓
ISP DNS → 客户端：返回 IP 并缓存
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>面试回答要点（三步法）：</strong></p> <p><strong>1. 先说原理：</strong></p> <blockquote><p>&quot;DNS 采用分层树状结构，每个服务器只管理自己的域名空间。就像查电话簿，先查省份，再查城市，最后查具体人名&quot;</p></blockquote> <p><strong>2. 再说过程：</strong></p> <blockquote><p>&quot;查询时从右到左逐级解析：先问根服务器（.com），再问顶级域名服务器（baidu.com），最后问权威服务器得到 IP&quot;</p></blockquote> <p><strong>3. 最后说优化：</strong></p> <blockquote><p>&quot;实际查询中，ISP DNS 服务器会缓存结果，所以大部分情况下不需要每次都走完整流程。而且客户端到 ISP DNS 是递归查询，客户端只发一次请求，后续查询都由 ISP DNS 完成&quot;</p></blockquote> <p><strong>只有当所有本地缓存均未命中时，才会向 DNS 服务器发起真正的网络请求。</strong></p> <h3 id="_2-建立-tcp-连接-三次握手">2. 建立 TCP 连接（三次握手）</h3> <p><strong>浏览器通过 TCP 协议与服务器建立可靠连接：</strong></p> <p><strong>三次握手过程：</strong></p> <ol><li><p><strong>第一次握手（SYN）</strong>：</p> <ul><li>客户端发送一个 TCP 包，设置 <code>SYN=1</code>，序列号 <code>Seq=X</code></li> <li>客户端进入 <code>SYN_SENT</code> 状态</li> <li>表示客户端请求建立连接</li></ul></li> <li><p><strong>第二次握手（SYN-ACK）</strong>：</p> <ul><li>服务器收到请求后，返回响应包</li> <li>设置 <code>SYN=1</code>，<code>ACK=X+1</code>，序列号 <code>Seq=Y</code></li> <li>服务器进入 <code>SYN_RCVD</code> 状态</li> <li>表示服务器确认客户端的连接请求，同时请求与客户端建立连接</li></ul></li> <li><p><strong>第三次握手（ACK）</strong>：</p> <ul><li>客户端发送确认包，设置 <code>ACK=Y+1</code>，序列号 <code>Seq=Z</code></li> <li>客户端和服务器都进入 <code>ESTABLISHED</code> 状态</li> <li><strong>连接建立完成</strong>，可以开始传输数据</li></ul></li></ol> <p><strong>为什么需要三次握手？</strong></p> <ol><li><strong>确认双方的发送和接收能力</strong>：确保客户端和服务器都能发送和接收数据</li> <li><strong>防止已失效的连接请求</strong>：防止网络延迟导致的过期连接请求被服务器误认为是新连接</li></ol> <p><strong>为什么不能是两次？</strong></p> <ul><li>两次握手时，服务器无法确认客户端能接收数据</li> <li>如果客户端发送的 SYN 因网络延迟卡住，客户端会重发。旧请求到达时，两次握手会让服务器误认为是新连接并建立连接，但客户端已关闭，导致服务器一直等待</li></ul> <p><strong>为什么不能是四次？</strong></p> <ul><li>三次已足够确认双方的双向通信能力，四次是多余的</li></ul> <p><strong>TCP 连接复用（Keep-Alive）：</strong></p> <ul><li>HTTP/1.1 默认启用 <code>Connection: keep-alive</code></li> <li>同一个 TCP 连接可以发送多个 HTTP 请求</li> <li>减少 TCP 握手的开销</li></ul> <h3 id="_3-tls-握手-仅-https">3. TLS 握手（仅 HTTPS）</h3> <p><strong>如果使用的是 HTTPS 协议，在 TCP 建立完成后，还需要进行 TLS 握手才能建立安全连接。</strong></p> <p><strong>为什么需要 TLS 握手？</strong></p> <ul><li><strong>验证服务器证书</strong>：确保连接的是真正的目标服务器，防止中间人攻击</li> <li><strong>协商加密算法</strong>：客户端和服务器协商出双方都支持的加密套件</li> <li><strong>协商对称加密密钥</strong>：通过非对称加密（公钥/私钥）安全地协商出对称加密的共享密钥</li></ul> <h3 id="_4-浏览器组装-http-请求报文">4. 浏览器组装 HTTP 请求报文</h3> <p><strong>浏览器构建 HTTP 请求报文，包括：</strong></p> <p><strong>请求行：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GET /index.html HTTP/1.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>请求方法：GET、POST、PUT、DELETE 等</li> <li>请求路径：URL 的路径部分</li> <li>HTTP 版本：HTTP/1.1 或 HTTP/2</li></ul> <p><strong>请求头（Request Headers）：</strong></p> <ul><li><code>Host</code>：目标主机名（必需）</li> <li><code>User-Agent</code>：浏览器类型和版本</li> <li><code>Accept</code>：客户端可接受的内容类型</li> <li><code>Accept-Language</code>：客户端可接受的语言</li> <li><code>Accept-Encoding</code>：客户端可接受的编码（如 gzip）</li> <li><code>Cookie</code>：存储的 Cookie 信息</li> <li><code>Referer</code>：来源页面 URL</li> <li><code>Connection</code>：连接方式（keep-alive / close）</li> <li><code>Cache-Control</code>：缓存控制</li> <li><code>If-None-Match</code> / <code>If-Modified-Since</code>：缓存验证（协商缓存）</li></ul> <p><strong>请求体（Request Body）：</strong></p> <ul><li>GET 请求通常没有请求体</li> <li>POST、PUT 请求包含请求数据（表单数据、JSON 等）</li></ul> <h3 id="_5-发送-http-请求">5. 发送 HTTP 请求</h3> <p><strong>浏览器通过已建立的 TCP/TLS 连接发送 HTTP 请求报文给服务器。</strong></p> <h2 id="三、服务器处理阶段">三、服务器处理阶段</h2> <h3 id="_1-服务器接收与路由">1. 服务器接收与路由</h3> <p><strong>服务器（如 Nginx、Apache）接收到 HTTP 请求后，首先进行请求解析和路由：</strong></p> <ul><li><strong>解析请求头</strong>：提取请求方法、路径、协议版本、请求头信息</li> <li><strong>缓存验证</strong>：检查 HTTP 请求头中的缓存验证信息（如 <code>If-None-Match</code>、<code>If-Modified-Since</code>）
<ul><li>如果资源未修改，返回 <strong>304 Not Modified</strong>，客户端使用本地缓存</li> <li>如果资源已修改或不存在，继续处理请求</li></ul></li></ul> <h3 id="_2-请求处理流程">2. 请求处理流程</h3> <p><strong>典型的服务器架构（Nginx 作为反向代理）：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>客户端请求 → Nginx（反向代理服务器）
              ↓
        ┌─────┴─────┐
        ↓           ↓
   静态资源      动态请求
   (直接返回)    (转发后端)
                  ↓
           后端应用服务器
           (Node.js/Java等)
                  ↓
              数据库/缓存
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>处理流程：</strong></p> <ol><li><p><strong>静态资源请求</strong></p> <ul><li>Nginx 直接返回文件系统中的静态文件（HTML、CSS、JS、图片等）</li> <li>无需转发到后端，响应最快</li></ul></li> <li><p><strong>动态请求（需要后端处理）</strong></p> <ul><li>Nginx 作为<strong>反向代理</strong>，将请求转发到后端应用服务器</li> <li>后端应用服务器处理：
<ul><li>执行业务逻辑</li> <li>访问数据库或缓存获取数据</li> <li>进行数据计算和处理</li> <li>生成 HTML 或 JSON 响应</li></ul></li> <li>响应通过 Nginx 返回给客户端</li></ul></li></ol> <h3 id="_3-返回-http-响应">3. 返回 HTTP 响应</h3> <p><strong>服务器构建并返回 HTTP 响应报文，主要包含：</strong></p> <p><strong>状态行：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HTTP/1.1 200 OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>200 OK</code>：请求成功</li> <li><code>301 Moved Permanently</code>：永久重定向</li> <li><code>302 Found</code>：临时重定向</li> <li><code>304 Not Modified</code>：缓存有效（协商缓存）</li> <li><code>400 Bad Request</code>：请求错误</li> <li><code>401 Unauthorized</code>：未授权</li> <li><code>403 Forbidden</code>：禁止访问</li> <li><code>404 Not Found</code>：资源不存在</li> <li><code>500 Internal Server Error</code>：服务器错误</li> <li><code>502 Bad Gateway</code>：网关错误</li> <li><code>503 Service Unavailable</code>：服务不可用</li></ul> <p><strong>响应头（Response Headers）：</strong></p> <ul><li><code>Content-Type</code>：资源类型（<code>text/html</code>、<code>application/json</code>、<code>image/png</code> 等）</li> <li><code>Content-Length</code>：响应体大小（字节）</li> <li><code>Content-Encoding</code>：内容编码（如 <code>gzip</code>、<code>br</code>）</li> <li><code>Cache-Control</code>：缓存控制策略</li> <li><code>ETag</code>：资源版本标识（用于协商缓存）</li> <li><code>Last-Modified</code>：资源最后修改时间（用于协商缓存）</li> <li><code>Set-Cookie</code>：设置 Cookie</li> <li><code>Location</code>：重定向目标 URL（用于 301/302）</li> <li><code>Access-Control-Allow-Origin</code>：CORS 跨域控制</li></ul> <p><strong>响应体（Response Body）：</strong></p> <ul><li>HTML 文档</li> <li>JSON 数据</li> <li>二进制资源（图片、视频、字体等）</li></ul> <h2 id="四、浏览器接收响应阶段">四、浏览器接收响应阶段</h2> <h3 id="_1-接收-http-响应">1. 接收 HTTP 响应</h3> <p><strong>浏览器接收服务器返回的 HTTP 响应报文：</strong></p> <ul><li>解析状态码，判断请求是否成功</li> <li>解析响应头，提取缓存信息、内容类型等</li> <li>接收响应体数据（可能是流式接收）</li></ul> <h3 id="_2-处理重定向">2. 处理重定向</h3> <p><strong>如果服务器返回 301 或 302 重定向：</strong></p> <ul><li>浏览器读取 <code>Location</code> 响应头，获取重定向目标 URL</li> <li><strong>自动发起新的请求</strong>到重定向 URL</li> <li>重定向可能会发生多次（浏览器通常限制重定向次数，如 20 次）</li> <li>重定向会增加额外的网络请求，影响性能</li></ul> <p><strong>重定向类型：</strong></p> <ul><li><strong>301 永久重定向</strong>：浏览器会缓存重定向关系，后续直接访问新 URL</li> <li><strong>302 临时重定向</strong>：每次都需要重定向，不缓存</li></ul> <h3 id="_3-处理缓存响应">3. 处理缓存响应</h3> <p><strong>如果服务器返回 304 Not Modified：</strong></p> <ul><li>浏览器使用本地缓存资源</li> <li>不下载响应体，节省带宽和时间</li></ul> <p><strong>如果服务器返回 200 OK：</strong></p> <ul><li>浏览器接收新资源</li> <li>根据响应头更新缓存（<code>Cache-Control</code>、<code>ETag</code>、<code>Last-Modified</code>）</li></ul> <h3 id="_4-解压响应内容">4. 解压响应内容</h3> <p><strong>如果响应使用了压缩（<code>Content-Encoding: gzip</code>）：</strong></p> <ul><li>浏览器自动解压响应体</li> <li>支持 gzip、deflate、br（Brotli）等压缩格式</li></ul> <h3 id="_5-开始解析-html">5. 开始解析 HTML</h3> <p><strong>浏览器接收到 HTML 数据后，开始解析和渲染流程。</strong></p> <h2 id="五、浏览器渲染阶段-核心重点">五、浏览器渲染阶段（核心重点）</h2> <p>当浏览器接收到 HTML 数据后，渲染引擎开始工作。这是整个页面展示过程中最关键的部分，直接影响首屏渲染速度和用户体验。</p> <h3 id="渲染流程概览">渲染流程概览</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>HTML 字节流 → DOM 树 → CSSOM 树 → 渲染树 → 布局 → 绘制 → 分层 → 合成 → 屏幕显示
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-构建-dom-树-dom-tree">1. 构建 DOM 树（DOM Tree）</h3> <p><strong>过程：</strong></p> <ul><li>浏览器接收到 HTML 字节流后，<strong>自上而下逐行解析</strong></li> <li>将 HTML 标签转换为 <strong>DOM 节点</strong>（Node）</li> <li>根据标签的嵌套关系，形成树形结构</li> <li>每个节点包含标签名、属性、子节点等信息</li></ul> <p><strong>特点：</strong></p> <ul><li><strong>渐进式解析</strong>：遇到 <code>&lt;script&gt;</code> 标签会暂停 DOM 解析，执行完 JS 后继续</li> <li><strong>容错机制</strong>：浏览器会自动修复一些 HTML 错误（如未闭合标签）</li> <li><strong>解析是异步的</strong>：不会阻塞其他资源的下载</li></ul> <p><strong>示例：</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>页面标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>解析后形成：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Document
└── html
    ├── head
    │   └── title
    │       └── &quot;页面标题&quot;
    └── body
        └── div
            └── &quot;内容&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>优化建议：</strong></p> <ul><li>减少 DOM 层级深度</li> <li>避免在 HTML 中写大量内联样式和脚本</li> <li>使用 <code>defer</code> 或 <code>async</code> 属性延迟脚本执行</li></ul> <p><strong>资源加载时机：</strong></p> <p>在 HTML 解析过程中，遇到以下资源标签会触发额外的网络请求：</p> <ul><li><code>&lt;link rel=&quot;stylesheet&quot;&gt;</code>：CSS 样式表</li> <li><code>&lt;script src=&quot;&quot;&gt;</code>：JavaScript 脚本</li> <li><code>&lt;img src=&quot;&quot;&gt;</code>：图片资源</li> <li><code>&lt;video src=&quot;&quot;&gt;</code>、<code>&lt;audio src=&quot;&quot;&gt;</code>：媒体资源</li> <li><code>&lt;iframe src=&quot;&quot;&gt;</code>：嵌入页面</li> <li><code>@font-face</code>：字体文件</li></ul> <p><strong>关键点：</strong></p> <ul><li><strong>同步 JavaScript 会阻塞 DOM 解析</strong>：遇到 <code>&lt;script&gt;</code> 标签时，浏览器会暂停 DOM 解析，下载并执行脚本</li> <li><strong>CSS 会阻塞渲染</strong>：必须等待 CSS 解析完成才能构建渲染树</li> <li><strong>图片不会阻塞渲染</strong>：图片加载是异步的，但会影响页面布局（如果未设置尺寸）</li> <li><strong>资源加载是并行的</strong>：浏览器会并行下载多个资源（受同域连接数限制，HTTP/1.1 通常是 6-8 个）</li></ul> <h3 id="_2-构建-cssom-树-css-object-model">2. 构建 CSSOM 树（CSS Object Model）</h3> <p><strong>过程：</strong></p> <ul><li>解析所有 CSS 资源（外链 CSS、内联 <code>&lt;style&gt;</code>、行内样式）</li> <li>将 CSS 规则转换为 <strong>CSSOM 树</strong></li> <li>计算每个节点的最终样式（继承、层叠、优先级）</li></ul> <p><strong>特点：</strong></p> <ul><li><strong>CSS 解析会阻塞渲染</strong>：浏览器必须等待 CSS 解析完成才能构建渲染树</li> <li><strong>不会阻塞 DOM 解析</strong>：DOM 和 CSSOM 的构建是并行的</li> <li><strong>CSS 选择器从右到左匹配</strong>：<code>div p span</code> 先找 <code>span</code>，再找 <code>p</code>，最后找 <code>div</code></li></ul> <p><strong>CSS 阻塞渲染的原因：</strong></p> <ul><li>如果 CSS 未加载完成就渲染，可能出现 <strong>FOUC（Flash of Unstyled Content）</strong> 闪烁</li> <li>浏览器会等待 CSS 解析完成，确保首次渲染就是正确的样式</li></ul> <p><strong>优化建议：</strong></p> <ul><li>将关键 CSS 内联到 HTML 中（Critical CSS）</li> <li>非关键 CSS 使用 <code>media</code> 属性延迟加载：<code>&lt;link rel=&quot;stylesheet&quot; media=&quot;print&quot; href=&quot;print.css&quot;&gt;</code></li> <li>避免使用过于复杂的选择器（如 <code>div &gt; ul &gt; li &gt; a &gt; span</code>）</li> <li>减少 CSS 文件数量和大小</li></ul> <h3 id="_3-生成渲染树-render-tree">3. 生成渲染树（Render Tree）</h3> <p><strong>过程：</strong></p> <ul><li>将 <strong>DOM 树</strong> 和 <strong>CSSOM 树</strong> 合并</li> <li>遍历 DOM 树，为每个可见节点找到对应的 CSS 规则</li> <li>计算每个节点的最终样式（继承、层叠、优先级）</li> <li>生成只包含<strong>可见元素</strong>的渲染树</li></ul> <p><strong>关键点：</strong></p> <ul><li><strong>只包含可见节点</strong>：
<ul><li><code>display: none</code> 的元素<strong>不会</strong>出现在渲染树中</li> <li><code>visibility: hidden</code> 的元素<strong>会</strong>出现在渲染树中（占据空间但不显示）</li> <li><code>&lt;head&gt;</code>、<code>&lt;script&gt;</code> 等不可见元素会被剔除</li></ul></li> <li><strong>每个节点包含完整的样式信息</strong>：位置、大小、颜色、字体等</li></ul> <p><strong>示例：</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>隐藏内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>可见内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>渲染树中只包含 <code>&lt;p&gt;</code> 节点，不包含 <code>&lt;div&gt;</code>。</p> <h3 id="_4-布局-layout-reflow-回流">4. 布局（Layout / Reflow 回流）</h3> <p><strong>过程：</strong></p> <ul><li>计算渲染树中每个节点的<strong>几何信息</strong>：
<ul><li>位置坐标（x, y）</li> <li>尺寸大小（width, height）</li> <li>边框、内边距、外边距</li></ul></li> <li>确定元素在页面中的<strong>精确位置和大小</strong></li> <li>这是一个<strong>自上而下、可能递归</strong>的过程（因为某些元素的大小依赖于子元素）</li></ul> <p><strong>触发回流的操作：</strong></p> <ul><li>修改 DOM 结构（添加、删除、移动节点）</li> <li>修改元素的尺寸相关属性：
<ul><li><code>width</code>、<code>height</code>、<code>padding</code>、<code>margin</code></li> <li><code>border-width</code>、<code>min-height</code> 等</li></ul></li> <li>修改布局相关属性：
<ul><li><code>position</code>、<code>float</code>、<code>display</code></li> <li><code>flex</code>、<code>grid</code> 布局属性</li></ul></li> <li>读取布局信息（如 <code>offsetWidth</code>、<code>scrollTop</code>、<code>getBoundingClientRect()</code>）</li> <li>窗口大小改变（<code>resize</code> 事件）</li> <li>字体大小改变</li></ul> <p><strong>性能影响：</strong></p> <ul><li><strong>回流是性能杀手</strong>：会触发后续的绘制和合成，成本很高</li> <li><strong>强制同步布局</strong>：读取布局属性会强制浏览器立即执行回流，导致性能问题</li></ul> <p><strong>优化建议：</strong></p> <ul><li>批量修改 DOM，使用 <code>DocumentFragment</code> 或虚拟 DOM</li> <li>避免频繁读取布局属性，先读取后修改</li> <li>使用 CSS3 的 <code>transform</code> 和 <code>opacity</code> 代替修改位置和尺寸（不会触发回流）</li> <li>使用 <code>absolute</code> 或 <code>fixed</code> 定位，脱离文档流，减少影响范围</li></ul> <h3 id="_5-绘制-painting-repaint-重绘">5. 绘制（Painting / Repaint 重绘）</h3> <p><strong>过程：</strong></p> <ul><li>将布局阶段计算好的元素<strong>绘制成位图（bitmap）</strong></li> <li>包括元素的视觉表现：
<ul><li>背景色、背景图</li> <li>文本内容、字体样式</li> <li>边框、阴影</li> <li>图片、视频等</li></ul></li> <li><strong>不处理几何位置</strong>，只负责&quot;画&quot;出元素的外观</li></ul> <p><strong>触发重绘的操作：</strong></p> <ul><li>修改颜色相关属性：<code>color</code>、<code>background-color</code>、<code>border-color</code></li> <li>修改视觉效果：<code>box-shadow</code>、<code>outline</code>、<code>opacity</code></li> <li>修改背景：<code>background-image</code>、<code>background-position</code></li> <li>修改字体：<code>font-size</code>、<code>font-family</code>、<code>text-decoration</code></li></ul> <p><strong>性能影响：</strong></p> <ul><li>重绘比回流成本低，但仍需要重新计算像素</li> <li>如果频繁重绘，仍会影响性能</li></ul> <p><strong>优化建议：</strong></p> <ul><li>避免频繁修改样式</li> <li>使用 CSS3 硬件加速属性（<code>transform</code>、<code>opacity</code>）</li> <li>合理使用 <code>will-change</code> 提示浏览器优化</li></ul> <h3 id="_6-layerize-分层">6. Layerize（分层）</h3> <p><strong>过程：</strong></p> <ul><li>浏览器根据特定规则将某些元素<strong>提升为独立的合成层（Layer）</strong></li> <li>每个层都有自己的绘制上下文</li> <li>为后续的合成阶段做准备</li></ul> <p><strong>会被提升为独立图层的元素：</strong></p> <ul><li>使用 <code>transform</code> 或 <code>opacity</code> 的元素（CSS3 硬件加速）</li> <li><code>position: fixed</code> 或 <code>position: sticky</code> 的元素</li> <li>设置了 <code>will-change</code> 属性的元素</li> <li><code>&lt;video&gt;</code>、<code>&lt;canvas&gt;</code>、<code>&lt;iframe&gt;</code> 等元素</li> <li>有 3D 变换的元素（<code>transform: translateZ(0)</code>）</li> <li>有 <code>filter</code> 效果的元素（如 <code>blur</code>、<code>opacity</code>）</li></ul> <p><strong>为什么需要分层？</strong></p> <ul><li><strong>独立渲染</strong>：每个层可以独立绘制和更新，互不影响</li> <li><strong>GPU 加速</strong>：合成层可以交给 GPU 处理，性能更好</li> <li><strong>减少重绘范围</strong>：修改某个层的内容时，只需要重绘该层，不影响其他层</li></ul> <p><strong>优化建议：</strong></p> <ul><li>合理使用 <code>transform</code> 和 <code>opacity</code> 触发硬件加速</li> <li>避免过度使用 <code>will-change</code>（会占用内存）</li> <li>使用 Chrome DevTools 的 Layers 面板查看分层情况</li></ul> <h3 id="_7-compositing-合成">7. Compositing（合成）</h3> <p><strong>过程：</strong></p> <ul><li>由 <strong>合成线程（Compositor Thread）</strong> 完成</li> <li>将各个独立的图层按照正确的顺序<strong>合成为一个最终的图像</strong></li> <li>处理图层的变换、透明度、混合等效果</li> <li>最终交给 <strong>GPU</strong> 显示到屏幕上</li></ul> <p><strong>关键特点：</strong></p> <ul><li><strong>不阻塞主线程</strong>：合成在独立的合成线程中进行</li> <li><strong>GPU 加速</strong>：利用 GPU 的并行处理能力，性能极佳</li> <li><strong>只处理图层变换</strong>：如果只修改 <code>transform</code> 或 <code>opacity</code>，可以跳过布局和绘制，直接合成</li></ul> <p><strong>合成线程的优势：</strong></p> <ul><li>即使主线程被 JavaScript 阻塞，合成线程仍可以继续工作</li> <li>滚动、动画等操作可以非常流畅</li> <li>这就是为什么使用 <code>transform</code> 做动画比修改 <code>left</code>、<code>top</code> 性能更好的原因</li></ul> <p><strong>优化建议：</strong></p> <ul><li><strong>优先使用 <code>transform</code> 和 <code>opacity</code> 做动画</strong>（只触发合成，不触发回流和重绘）</li> <li>避免在动画中修改会触发回流的属性</li> <li>使用 <code>requestAnimationFrame</code> 优化动画性能</li></ul> <h3 id="渲染性能优化总结">渲染性能优化总结</h3> <p><strong>性能从好到差：</strong></p> <ol><li><strong>只触发合成</strong>：<code>transform</code>、<code>opacity</code>（最佳）</li> <li><strong>触发重绘</strong>：颜色、背景等视觉属性</li> <li><strong>触发回流</strong>：尺寸、位置等布局属性（最差）</li></ol> <p><strong>优化原则：</strong></p> <ul><li>减少回流和重绘的次数</li> <li>使用 CSS3 硬件加速</li> <li>批量修改 DOM</li> <li>避免强制同步布局</li> <li>使用 <code>requestAnimationFrame</code> 优化动画</li></ul> <h3 id="关键概念对比">关键概念对比</h3> <table><thead><tr><th>概念</th> <th>触发条件</th> <th>性能影响</th> <th>优化方法</th></tr></thead> <tbody><tr><td><strong>回流（Reflow）</strong></td> <td>修改布局属性（width、height、position 等）</td> <td>高（会触发重绘和合成）</td> <td>使用 transform 代替</td></tr> <tr><td><strong>重绘（Repaint）</strong></td> <td>修改视觉属性（color、background 等）</td> <td>中（会触发合成）</td> <td>批量修改样式</td></tr> <tr><td><strong>合成（Composite）</strong></td> <td>修改 transform、opacity</td> <td>低（GPU 加速）</td> <td>优先使用这两个属性</td></tr></tbody></table> <h2 id="六、后续阶段">六、后续阶段</h2> <p>页面首次渲染完成后，浏览器还会继续处理各种交互和资源加载</p> <h3 id="_1-资源加载时机">1. 资源加载时机</h3> <p>在 HTML 解析过程中，遇到以下资源会触发额外请求：</p> <ul><li><code>&lt;img&gt;</code> 图片资源</li> <li><code>&lt;link&gt;</code> CSS 样式表</li> <li><code>&lt;script&gt;</code> JavaScript 脚本</li> <li><code>&lt;video&gt;</code>、<code>&lt;audio&gt;</code> 媒体资源</li> <li><code>&lt;iframe&gt;</code> 嵌入页面</li> <li><code>@font-face</code> 字体文件</li></ul> <p><strong>关键点：</strong></p> <ul><li><strong>同步 JS 会阻塞 DOM 解析</strong>：遇到 <code>&lt;script&gt;</code> 标签时，浏览器会暂停 DOM 解析，下载并执行脚本</li> <li><strong>CSS 会阻塞渲染</strong>：必须等待 CSS 解析完成才能构建渲染树</li> <li>CSS 不会阻塞 JS 的下载，但会阻塞 JS 的执行; JS 会阻塞 HTML 的解析</li> <li><strong>图片不会阻塞渲染</strong>：图片加载是异步的，但会影响页面布局（如果未设置尺寸）</li></ul> <p><strong>JavaScript 解析与执行流程：</strong></p> <p><strong>1. HTML 解析阶段（document.readyState = 'loading'）</strong></p> <ul><li>浏览器创建 Document 对象并解析 HTML</li> <li>将解析到的元素和文本节点添加到文档中</li> <li>此时 <code>document.readyState</code> 为 <code>'loading'</code></li></ul> <p><strong>2. 同步脚本执行（阻塞解析）</strong></p> <ul><li>遇到<strong>没有 <code>async</code> 和 <code>defer</code> 的 <code>&lt;script&gt;</code></strong> 时：
<ul><li>暂停 HTML 解析</li> <li>下载并执行脚本（行内或外部）</li> <li>脚本执行完成后继续解析</li></ul></li> <li><strong>特点</strong>：
<ul><li>可以使用 <code>document.write()</code> 插入内容</li> <li>可以访问 <code>script</code> 标签之前的 DOM 内容</li> <li>常用于定义函数和注册事件处理程序</li></ul></li></ul> <p><strong>3. 异步脚本执行（async）</strong></p> <ul><li>遇到<strong>设置了 <code>async</code> 的 <code>&lt;script&gt;</code></strong> 时：
<ul><li>开始下载脚本（不阻塞解析）</li> <li>HTML 解析继续进行</li> <li>脚本下载完成后立即执行（可能在解析完成前）</li></ul></li> <li><strong>特点</strong>：
<ul><li><strong>禁止使用 <code>document.write()</code></strong></li> <li>可以访问自己 <code>script</code> 标签和之前的 DOM 元素</li> <li>多个 <code>async</code> 脚本执行顺序不确定</li></ul></li></ul> <p><strong>4. 文档解析完成（document.readyState = 'interactive'）</strong></p> <ul><li>HTML 解析完成，<code>document.readyState</code> 变为 <code>'interactive'</code></li> <li><strong>延迟脚本（defer）执行</strong>：
<ul><li>所有 <code>defer</code> 脚本按在文档中出现的顺序执行</li> <li>可以访问完整的文档树</li> <li><strong>禁止使用 <code>document.write()</code></strong></li></ul></li> <li><strong>触发 <code>DOMContentLoaded</code> 事件</strong>：
<ul><li>表示 DOM 已完全解析</li> <li>此时可以安全地操作 DOM</li></ul></li></ul> <p><strong>5. 资源加载完成（document.readyState = 'complete'）</strong></p> <ul><li>等待图片、字体等资源加载完成</li> <li>等待所有异步脚本执行完成</li> <li><code>document.readyState</code> 变为 <code>'complete'</code></li> <li><strong>触发 <code>window.load</code> 事件</strong>：
<ul><li>表示页面所有资源都已加载完成</li></ul></li></ul> <p><strong>执行时机对比：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HTML 解析中 → 同步脚本（阻塞）→ 继续解析
           ↓
        async 脚本（并行下载，下载完立即执行）
           ↓
    解析完成 → defer 脚本（按顺序执行）→ DOMContentLoaded
           ↓
    资源加载完成 → load 事件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-javascript-执行与事件处理">2. JavaScript 执行与事件处理</h3> <p><strong>JavaScript 引擎执行流程：</strong></p> <p><strong>执行上下文（Execution Context）：</strong></p> <ul><li><strong>全局执行上下文</strong>：页面加载时创建</li> <li><strong>函数执行上下文</strong>：函数调用时创建</li></ul> <p><strong>调用栈（Call Stack）：</strong></p> <ul><li>JavaScript 是单线程的，只有一个调用栈</li> <li>函数调用会创建新的执行上下文并压入栈</li> <li>函数执行完成后，执行上下文出栈</li></ul> <p><strong>事件循环（Event Loop）：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>调用栈 → 执行同步代码
     ↓
微任务队列（Microtask Queue）
  - Promise.then()
  - queueMicrotask()
  - MutationObserver
     ↓
宏任务队列（Macrotask Queue）
  - setTimeout()
  - setInterval()
  - I/O 操作
  - UI 渲染
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>执行顺序：</strong></p> <ol><li>执行同步代码</li> <li>执行所有微任务</li> <li>执行一个宏任务</li> <li>重复步骤 2-3</li></ol> <h1 id="当面试官问我前端可以做的性能优化有哪些">当面试官问我前端可以做的性能优化有哪些</h1> <p><a href="https://juejin.cn/post/7194400984490049573#heading-41" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="回答思路">回答思路</h2> <p>前端性能优化可以从<strong>性能指标、网络层面、渲染层面、代码层面、资源层面、构建层面</strong>等多个维度进行优化。核心目标是<strong>减少资源体积、加快加载速度、提升渲染性能、优化用户体验</strong>。</p> <hr> <h2 id="_0-web性能核心指标">0.WEB性能核心指标</h2> <blockquote><p><strong>预备知识：别被指标缩写吓跑了</strong></p></blockquote> <blockquote><p>别被那一堆性能指标缩写整蒙了。对于前端来说，核心就关注三件事：<strong>快不快（Loading）</strong>、<strong>卡不卡（Interaction）</strong>、<strong>稳不稳（Visual Stability）</strong></p></blockquote> <hr> <h3 id="_1-loading-加载-别让我等太久">1. Loading（加载）：别让我等太久！</h3> <p>用户最怕面对一片白屏。这个阶段我们关注三个瞬间：</p> <table><thead><tr><th>指标（全称）</th> <th>解释</th> <th>典型场景</th></tr></thead> <tbody><tr><td><strong>FP (First Paint)</strong></td> <td><strong>&quot;屏幕亮了&quot;</strong><br>浏览器开始渲染任何东西的时刻（哪怕只是背景色）</td> <td>屏幕从纯白变成浅灰色，虽然啥内容都没有，但你知道&quot;它活着&quot;</td></tr> <tr><td><strong>FCP (First Contentful Paint)</strong></td> <td><strong>&quot;看到内容了&quot;</strong><br>浏览器渲染出第一个内容（文字、图片、Logo）的时刻</td> <td>页面上终于蹦出了&quot;Loading...&quot;文字或者导航栏 Logo</td></tr> <tr><td><strong>LCP (Largest Contentful Paint)</strong> ⭐</td> <td><strong>&quot;主角登场&quot;</strong><br>视口内可见的最大图片或文本块渲染完成的时刻。这是 Google 最看重的加载指标</td> <td>淘宝详情页的大图终于刷出来了，你终于看清商品长啥样了</td></tr></tbody></table> <p><strong>及格线</strong>：FCP &lt; 1.8s，LCP &lt; 2.5s</p> <hr> <h3 id="_2-interaction-交互-别卡得像-ppt">2. Interaction（交互）：别卡得像 PPT！</h3> <p>东西加载出来了，用户开始点了，这时候最怕卡顿。这个阶段我们关注：</p> <table><thead><tr><th>指标（全称）</th> <th>解释</th> <th>典型场景</th></tr></thead> <tbody><tr><td><strong>FID (First Input Delay)</strong> ⭐</td> <td><strong>&quot;第一下没反应？&quot;</strong><br>用户第一次与页面交互（点击按钮、链接）到浏览器真正开始处理这个事件的时间差</td> <td>兴奋地去点&quot;登录&quot;按钮，结果点了没反应，过了1秒钟按钮才变色</td></tr> <tr><td><strong>INP (Interaction to Next Paint)</strong></td> <td><strong>&quot;越用越卡？&quot;</strong><br>FID的升级版。它不仅看第一下，还看你浏览全程中所有交互的延迟，取最慢的那几次</td> <td>每输入一个字，输入框都要卡顿一下才能显示出来，有种&quot;粘滞感&quot;</td></tr> <tr><td><strong>Long Task（长任务）</strong></td> <td><strong>&quot;谁在堵路？&quot;</strong><br>任何执行时间超过50ms的JavaScript任务</td> <td>主线程就像单行道，大卡车（复杂计算）一堵，后面的点击事件全得排队</td></tr></tbody></table> <p><strong>及格线</strong>：FID &lt; 100ms，INP &lt; 200ms，Long Task &lt; 50ms</p> <blockquote><p><strong>注</strong>：长任务不光交互期会出现，加载时也常见；它会让白屏更久、把 TBT（总阻塞时间）拉高。我们归到&quot;交互&quot;里讲，是因为它最直接拖慢的是点击/输入的响应（FID、INP）。</p></blockquote> <hr> <h3 id="_3-visual-stability-视觉稳定性-别乱动">3. Visual Stability（视觉稳定性）：别乱动！</h3> <p>这可能是最让人抓狂的体验。这个阶段我们关注：</p> <table><thead><tr><th>指标（全称）</th> <th>解释</th> <th>典型场景</th></tr></thead> <tbody><tr><td><strong>CLS (Cumulative Layout Shift)</strong> ⭐<br>累积布局偏移</td> <td><strong>&quot;手滑点错了！&quot;</strong><br>页面布局在加载过程中发生意外移动的程度</td> <td>刚想点&quot;取消&quot;，顶部广告突然插队把页面往下挤，害你点成了&quot;支付&quot;。分数越低，页面越稳</td></tr></tbody></table> <p><strong>及格线</strong>：CLS &lt; 0.1</p> <hr> <h3 id="web-vitals-核心指标-google推荐">Web Vitals 核心指标（Google推荐）</h3> <p><strong>Core Web Vitals</strong> 是Google定义的三个最重要的用户体验指标，直接影响SEO排名：</p> <ol><li><strong>LCP (Largest Contentful Paint)</strong> - 加载性能 ⭐</li> <li><strong>FID (First Input Delay)</strong> / <strong>INP (Interaction to Next Paint)</strong> - 交互性能 ⭐</li> <li><strong>CLS (Cumulative Layout Shift)</strong> - 视觉稳定性 ⭐</li></ol> <hr> <h3 id="其他重要指标">其他重要指标</h3> <table><thead><tr><th>指标（全称）</th> <th>解释</th> <th>说明</th></tr></thead> <tbody><tr><td><strong>TTFB (Time to First Byte)</strong></td> <td><strong>首字节时间</strong><br>从请求发送到接收到服务器第一个字节的时间</td> <td>反映服务器响应速度，及格线 &lt; 200ms</td></tr> <tr><td><strong>TTI (Time to Interactive)</strong></td> <td><strong>可交互时间</strong><br>页面完全可交互的时间点（所有资源加载完成，主线程空闲）</td> <td>用户可以进行交互操作的时间，及格线 &lt; 3.8s</td></tr> <tr><td><strong>DCL (DOMContentLoaded)</strong></td> <td><strong>DOM内容加载完成</strong><br>HTML文档完全加载和解析完成的时间</td> <td>DOM树构建完成，但资源可能仍在加载</td></tr> <tr><td><strong>L (Load)</strong></td> <td><strong>页面完全加载</strong><br>页面所有资源（图片、样式表等）加载完成的时间</td> <td>load事件触发时间</td></tr> <tr><td><strong>FPS (Frames Per Second)</strong></td> <td><strong>帧率</strong><br>每秒渲染的帧数</td> <td>60fps为流畅，&lt;30fps会感觉卡顿</td></tr></tbody></table> <h2 id="一、网络层面优化">一、网络层面优化</h2> <h3 id="_1-dns-预解析-dns-prefetch">1. DNS 预解析（DNS Prefetch）</h3> <p>提前解析域名，减少后续请求的 DNS 查询时间。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.example.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-预连接-preconnect">2. 预连接（Preconnect）</h3> <p>提前建立 TCP 连接和 TLS 握手，适用于需要频繁请求的第三方域名。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preconnect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://api.example.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-预加载-preload">3. 预加载（Preload）</h3> <p>提前加载关键资源，优先级高于普通资源。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font.woff2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font/woff2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>critical.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-域名收敛">4. 域名收敛</h3> <p>减少页面中域名的数量，从而减少 DNS 解析次数和连接建立时间。</p> <h3 id="_5-使用-cdn-加速">5. 使用 CDN 加速</h3> <p>将静态资源部署到 CDN，利用就近节点加速资源加载。</p> <h3 id="_6-http-2-或-http-3">6. HTTP/2 或 HTTP/3</h3> <ul><li><strong>HTTP/2</strong>：多路复用、头部压缩、服务器推送、二进制传输</li> <li><strong>HTTP/3</strong>：基于 QUIC 协议，解决队头阻塞，连接迁移</li></ul> <h3 id="_7-优化-http-缓存策略">7. 优化 HTTP 缓存策略</h3> <ul><li><strong>强缓存</strong>：<code>Cache-Control</code>、<code>Expires</code></li> <li><strong>协商缓存</strong>：<code>ETag</code>、<code>Last-Modified</code></li> <li>静态资源设置长期缓存，HTML 设置不缓存或短期缓存</li></ul> <h3 id="_8-资源压缩">8. 资源压缩</h3> <ul><li><strong>Gzip / Brotli 压缩</strong>：减少传输体积</li> <li><strong>代码压缩</strong>：JavaScript、CSS、HTML 压缩</li> <li><strong>图片压缩</strong>：（WebP / AVIF）</li></ul> <h3 id="_9-接口请求优化">9. 接口请求优化</h3> <ul><li>接口请求合并，减少请求次数</li> <li>使用批量接口替代多个单独接口</li> <li>合理使用请求缓存</li></ul> <hr> <h2 id="二、渲染层面优化">二、渲染层面优化</h2> <h3 id="_1-关键渲染路径优化">1. 关键渲染路径优化</h3> <p><strong>内联关键 CSS（Critical CSS）</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* 首屏关键样式内联 */</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token selector">.header</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>延迟加载非关键 CSS</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>non-critical.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>media<span class="token operator">=</span><span class="token string">'all'</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-javascript-加载优化">2. JavaScript 加载优化</h3> <p><strong>使用 defer 或 async</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- defer: 延迟执行，不阻塞 DOM 解析 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- async: 异步执行，下载完立即执行 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>analytics.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>动态加载脚本</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'app.js'</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-减少-dom-操作">3. 减少 DOM 操作</h3> <p><strong>批量修改 DOM</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ❌ 不好：多次触发回流</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ✅ 好：使用 DocumentFragment</span>
<span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>避免强制同步布局</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ❌ 不好：强制同步布局</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> width <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span> <span class="token comment">// 触发回流</span>

<span class="token comment">// ✅ 好：先读取后修改</span>
<span class="token keyword">const</span> width <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> width <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_4-使用虚拟列表">4. 使用虚拟列表</h3> <p>对于长列表，只渲染可见区域，减少 DOM 节点数量。</p> <h3 id="_5-服务端渲染-ssr">5. 服务端渲染（SSR）</h3> <p>使用 Next.js、Nuxt.js 等服务端渲染框架，提升首屏加载速度。</p> <h3 id="_6-骨架屏和-loading">6. 骨架屏和 Loading</h3> <p>在内容加载前显示骨架屏或 Loading 图标，提升用户体验。</p> <hr> <h2 id="三、javascript-代码优化">三、JavaScript 代码优化</h2> <h3 id="_1-事件委托-event-delegation">1. 事件委托（Event Delegation）</h3> <p>减少事件监听器数量，提升性能。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ❌ 不好：为每个元素绑定事件</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  item<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ 好：事件委托</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-防抖-debounce-和节流-throttle">2. 防抖（Debounce）和节流（Throttle）</h3> <p><strong>防抖</strong>：适用于搜索输入、窗口 resize</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>节流</strong>：适用于滚动事件、鼠标移动</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastTime <span class="token operator">&gt;=</span> wait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lastTime <span class="token operator">=</span> now<span class="token punctuation">;</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-使用-web-worker">3. 使用 Web Worker</h3> <p>将复杂计算放到 Web Worker 中执行，避免阻塞主线程。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'worker.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> largeData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'计算结果:'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// worker.js</span>
self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">heavyCalculation</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_4-计算结果缓存">4. 计算结果缓存</h3> <p>使用缓存减少重复计算，如 Vue 的 <code>computed</code>、React 的 <code>useMemo</code>。</p> <h3 id="_5-动画优化">5. 动画优化</h3> <ul><li><strong>优先使用 CSS3 动画</strong>：<code>transform</code>、<code>opacity</code>（只触发合成，不触发回流和重绘）</li> <li><strong>使用 <code>requestAnimationFrame</code></strong>：优化 JavaScript 动画</li> <li><strong>避免使用 JS 动画</strong>：CSS3 动画和 Canvas 动画性能更好</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ✅ 使用 requestAnimationFrame</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-避免内存泄漏">6. 避免内存泄漏</h3> <ul><li>及时清理事件监听器</li> <li>清理定时器（<code>setTimeout</code>、<code>setInterval</code>）</li> <li>避免闭包持有大对象引用</li> <li>清理 DOM 引用</li></ul> <hr> <h2 id="四、css-优化-减少重绘和回流">四、CSS 优化（减少重绘和回流）</h2> <h3 id="_1-避免触发回流-reflow">1. 避免触发回流（Reflow）</h3> <p><strong>使用 <code>transform</code> 代替修改位置和尺寸</strong></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* ❌ 不好：触发回流 */</span>
<span class="token selector">.element</span> <span class="token punctuation">{</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* ✅ 好：只触发合成 */</span>
<span class="token selector">.element</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span> 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>使用 <code>absolute</code> 或 <code>fixed</code> 定位</strong>
脱离文档流，减少回流影响范围。</p> <h3 id="_2-避免触发重绘-repaint">2. 避免触发重绘（Repaint）</h3> <p><strong>批量修改样式</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ❌ 不好：多次触发重绘</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'1px solid black'</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ 好：一次性修改</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'new-style'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-使用-css3-硬件加速">3. 使用 CSS3 硬件加速</h3> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.element</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 或 translate3d(0,0,0) */</span>
  <span class="token property">will-change</span><span class="token punctuation">:</span> transform<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-优化选择器">4. 优化选择器</h3> <ul><li>避免过于复杂的选择器（如 <code>div &gt; ul &gt; li &gt; a &gt; span</code>）</li> <li>CSS 选择器从右到左匹配，优先使用类选择器</li></ul> <h3 id="_5-减少-css-文件数量和大小">5. 减少 CSS 文件数量和大小</h3> <ul><li>合并 CSS 文件</li> <li>移除未使用的 CSS</li> <li>使用 CSS 压缩工具</li></ul> <hr> <h2 id="五、资源优化">五、资源优化</h2> <h3 id="_1-图片优化">1. 图片优化</h3> <p><strong>选择合适的图片格式</strong></p> <table><thead><tr><th>格式</th> <th>特点</th> <th>使用场景</th> <th>优缺点</th></tr></thead> <tbody><tr><td>JPEG / JPG</td> <td>位图格式，有损压缩，色彩表现好</td> <td>照片、banner、背景图</td> <td>优点：色彩丰富、文件小、兼容性好；缺点：有损压缩、不可透明、不支持动画</td></tr> <tr><td>PNG</td> <td>位图格式，无损压缩，支持透明</td> <td>Logo、icon、需要透明的图片</td> <td>优点：无损、支持透明；缺点：体积大、不支持动画</td></tr> <tr><td>GIF</td> <td>位图格式，支持动画和透明</td> <td>简单动图、表情包</td> <td>优点：支持动画、兼容性好；缺点：仅支持 256 色、画质差</td></tr> <tr><td>WebP</td> <td>支持有损/无损压缩，支持透明和动画</td> <td>替代 JPEG / PNG / GIF</td> <td>优点：压缩率高、性能好；缺点：老旧浏览器不支持，需要回退格式</td></tr> <tr><td>SVG</td> <td>矢量图，可无限缩放</td> <td>图标、Logo、图表</td> <td>优点：无损缩放、文件小、可动画；缺点：不适合复杂照片</td></tr> <tr><td>AVIF</td> <td>新一代图片格式，基于 AV1</td> <td>高性能网站</td> <td>优点：比 WebP 压缩率更高；缺点：兼容性较差</td></tr></tbody></table> <p><strong>图片优化策略</strong></p> <ul><li>图片压缩：使用工具压缩图片体积</li> <li>使用雪碧图（CSS Sprites）：合并小图标，减少请求次数</li> <li>使用 iconfont：图标字体，体积小、可缩放</li> <li>小图片转 base64：减少 HTTP 请求（注意会增加 HTML 体积）</li> <li>图片懒加载：只加载可见区域的图片</li> <li>响应式图片：使用 <code>srcset</code> 和 <code>sizes</code> 属性</li> <li>渐变色使用 CSS 代替图片</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 图片懒加载 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>placeholder.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>real-image.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 响应式图片 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small.jpg 480w, medium.jpg 768w, large.jpg 1200w<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(max-width: 480px) 100vw, (max-width: 768px) 50vw, 33vw<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>medium.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-字体优化">2. 字体优化</h3> <ul><li>字体子集化：只包含使用的字符</li> <li>使用 <code>font-display: swap</code>：避免字体加载阻塞渲染</li> <li>预加载关键字体</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'MyFont'</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'font.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span> <span class="token comment">/* 字体加载期间显示备用字体 */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="六、构建打包优化">六、构建打包优化</h2> <h3 id="_1-代码分割-code-splitting">1. 代码分割（Code Splitting）</h3> <p>按需加载，减少初始包体积。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 路由懒加载</span>
<span class="token keyword">const</span> Home <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Home'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./About'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 组件懒加载</span>
<span class="token keyword">const</span> HeavyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./HeavyComponent'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-tree-shaking">2. Tree Shaking</h3> <p>移除未使用的代码，支持 ES6 模块的打包工具（Webpack、Rollup、Vite）。</p> <h3 id="_3-代码压缩">3. 代码压缩</h3> <ul><li>JavaScript：UglifyJS、Terser</li> <li>CSS：cssnano</li> <li>HTML：html-minifier</li></ul> <h3 id="_4-公共代码提取">4. 公共代码提取</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Webpack 配置</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_5-cdn-加载第三方模块">5. CDN 加载第三方模块</h3> <p>将 <code>node_modules</code> 中的第三方库通过 CDN 加载，减少打包体积</p> <h3 id="_6-多线程打包">6. 多线程打包</h3> <p>使用 <code>thread-loader</code> 或 <code>happypack</code> 加速构建。</p> <hr> <h2 id="七、框架特定优化">七、框架特定优化</h2> <h3 id="react-优化">React 优化</h3> <ol><li><p><strong>避免不必要的 render</strong></p> <ul><li>使用 <code>React.memo</code>、<code>React.PureComponent</code>、<code>shouldComponentUpdate</code></li></ul></li> <li><p><strong>避免内联函数和对象</strong></p></li></ol> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>   <span class="token comment">// ❌ 不好</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">button1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

   <span class="token comment">// ✅ 好</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">button1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li><p><strong>使用 Fragment 减少层级</strong></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child1</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child2</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>循环使用 key，但不要用 index</strong></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">data</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong>Hook 优化</strong></p> <ul><li>使用 <code>useMemo</code> 缓存计算结果</li> <li>使用 <code>useCallback</code> 缓存函数</li></ul></li> <li><p><strong>代码分割和懒加载</strong></p></li></ol> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponent'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="vue-优化">Vue 优化</h3> <ol><li><p><strong>v-for 添加 key</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>路由懒加载</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li></ol> <p>const Home = () =&gt; import('./Home.vue');</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
3. **第三方插件按需引入**
   ```javascript
   import { Button } from 'element-ui'; // 而不是 import ElementUI from 'element-ui'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="4"><li><p><strong>合理使用 computed 和 watch</strong></p> <ul><li><code>computed</code>：缓存计算结果</li> <li><code>watch</code>：监听数据变化</li></ul></li> <li><p><strong>v-for 和 v-if 不要同时使用</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- ❌ 不好 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.visible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- ✅ 好 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in visibleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><strong>使用 keep-alive 缓存组件</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentComponent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong>及时销毁事件和定时器</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  bus<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <hr> <h2 id="八、首屏优化策略">八、首屏优化策略</h2> <ol><li><strong>使用路由懒加载</strong>：按需加载路由组件</li> <li><strong>非首屏组件使用异步组件</strong>：延迟加载非关键组件</li> <li><strong>首屏不重要的组件延迟加载</strong>：使用 <code>IntersectionObserver</code> 或滚动加载</li> <li><strong>静态资源放在 CDN 上</strong>：加速资源加载</li> <li><strong>减少首屏 JS、CSS 等资源文件的大小</strong>：代码分割、压缩</li> <li><strong>使用服务端渲染（SSR）</strong>：提升首屏渲染速度</li> <li><strong>减少 DOM 的数量和层级</strong>：简化 HTML 结构</li> <li><strong>使用精灵图</strong>：减少图片请求次数</li> <li><strong>显示 Loading 或骨架屏</strong>：提升用户体验</li> <li><strong>开启 Gzip 压缩</strong>：减少传输体积</li> <li><strong>图片懒加载</strong>：只加载可见区域的图片</li> <li><strong>内联关键 CSS</strong>：减少首屏渲染阻塞</li></ol> <hr> <h2 id="九、性能监控工具">九、性能监控工具</h2> <h3 id="_1-chrome-devtools">1. Chrome DevTools</h3> <ul><li><strong>Performance</strong>：可查看性能指标，并有网页快照</li> <li><strong>Network</strong>：可以查看各个资源的加载时间</li> <li><strong>Lighthouse</strong>：性能评测工具</li></ul> <h3 id="_2-lighthouse">2. Lighthouse</h3> <p>非常流行的第三方性能评测工具，支持移动端和 PC，提供性能评分和优化建议。</p> <h3 id="_3-webpagetest">3. WebPageTest</h3> <p>在线性能测试工具，可以模拟不同网络环境和设备。</p> <h3 id="_4-pagespeed-insights">4. PageSpeed Insights</h3> <p>Google 提供的页面速度分析工具。</p> <hr></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">一月 6日 2026, 1:35:31 下午</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/G.工程化构建.html" class="prev">
        工程化构建
      </a></span> <span class="next"><a href="/docs/S.性能监控.html">
        性能监控SDK
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.087761fe.js" defer></script><script src="/docs/assets/js/2.959c8da4.js" defer></script><script src="/docs/assets/js/1.310dd804.js" defer></script><script src="/docs/assets/js/34.b7be3ad7.js" defer></script><script src="/docs/assets/js/21.cb775a35.js" defer></script>
  </body>
</html>
