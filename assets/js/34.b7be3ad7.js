(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{350:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"从输入url到页面展示的完整过程"}},[t._v("从输入URL到页面展示的完整过程")]),t._v(" "),s("h2",{attrs:{id:"完整流程概览"}},[t._v("完整流程概览")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("用户输入 URL\n    ↓\nURL 解析与处理\n    ↓\n查找浏览器缓存（强缓存）\n    ↓\nDNS 解析\n    ↓\n建立 TCP 连接\n    ↓\nTLS 握手（HTTPS）\n    ↓\n发送 HTTP 请求\n    ↓\n服务器处理与响应\n    ↓\n接收 HTTP 响应\n    ↓\n解析 HTML、CSS、JS\n    ↓\n构建 DOM 树、CSSOM 树\n    ↓\n构建渲染树\n    ↓\n布局（Layout）\n    ↓\n绘制（Paint）\n    ↓\n合成（Composite）\n    ↓\n页面显示\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("h2",{attrs:{id:"一、url-解析与预处理阶段"}},[t._v("一、URL 解析与预处理阶段")]),t._v(" "),s("h3",{attrs:{id:"_1-url-解析-第一步"}},[t._v("1. URL 解析（第一步）")]),t._v(" "),s("p",[s("strong",[t._v("浏览器首先解析 URL 中的各个组成部分：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("协议（Protocol）")]),t._v("：HTTP / HTTPS / FTP 等")]),t._v(" "),s("li",[s("strong",[t._v("域名（Domain）")]),t._v("：如 "),s("code",[t._v("www.example.com")])]),t._v(" "),s("li",[s("strong",[t._v("端口号（Port）")]),t._v("：默认 HTTP 为 80，HTTPS 为 443")]),t._v(" "),s("li",[s("strong",[t._v("路径（Path）")]),t._v("：如 "),s("code",[t._v("/index.html")])]),t._v(" "),s("li",[s("strong",[t._v("查询参数（Query）")]),t._v("：如 "),s("code",[t._v("?id=123&name=test")])]),t._v(" "),s("li",[s("strong",[t._v("锚点（Hash）")]),t._v("：如 "),s("code",[t._v("#section1")]),t._v("（不会发送到服务器）")])]),t._v(" "),s("p",[s("strong",[t._v("特殊处理：")])]),t._v(" "),s("ul",[s("li",[t._v("如果输入的内容不是一个合法 URL，浏览器通常会将其交由"),s("strong",[t._v("默认搜索引擎处理")]),t._v("（如 Google、百度）")]),t._v(" "),s("li",[t._v("如果输入的是域名但没有协议，浏览器会自动补全协议（通常是 HTTPS）")]),t._v(" "),s("li",[t._v("如果输入的是 IP 地址，会直接使用该 IP，跳过 DNS 解析")])]),t._v(" "),s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("输入：example.com\n解析后：https://example.com/（自动补全协议和路径）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-查找浏览器缓存-强缓存检查"}},[t._v("2. 查找浏览器缓存（强缓存检查）")]),t._v(" "),s("p",[s("strong",[t._v("在发起网络请求之前，浏览器会先检查缓存：")])]),t._v(" "),s("p",[s("strong",[t._v("缓存查找顺序：")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Memory Cache")]),t._v("：内存缓存，关闭标签页后失效")]),t._v(" "),s("li",[s("strong",[t._v("Disk Cache")]),t._v("：磁盘缓存，持久化存储")])]),t._v(" "),s("p",[s("strong",[t._v("缓存判断逻辑：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("未缓存")]),t._v("：发起新请求")]),t._v(" "),s("li",[s("strong",[t._v("已缓存且新鲜")]),t._v("：直接使用缓存，"),s("strong",[t._v("跳过网络请求")])]),t._v(" "),s("li",[s("strong",[t._v("已缓存但过期")]),t._v("：携带验证信息（"),s("code",[t._v("If-None-Match")]),t._v("、"),s("code",[t._v("If-Modified-Since")]),t._v("）发起协商缓存请求")])]),t._v(" "),s("p",[s("strong",[t._v("网络中的缓存层级：")])]),t._v(" "),s("p",[t._v("除了浏览器缓存，网络请求在到达源服务器之前，还可能经过多层缓存：")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("路由器缓存")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("DNS 缓存")]),t._v("：路由器会缓存 DNS 查询结果，减少 DNS 解析时间")]),t._v(" "),s("li",[s("strong",[t._v("HTTP 缓存")]),t._v("：部分企业级路由器支持 HTTP 代理缓存，可以缓存 HTTP 响应")]),t._v(" "),s("li",[s("strong",[t._v("特点")]),t._v("：缓存时间通常较短，主要用于局域网内多设备共享")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("CDN 缓存（内容分发网络）")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("边缘节点缓存")]),t._v("：CDN 在全球各地部署边缘节点，缓存静态资源（HTML、CSS、JS、图片等）")]),t._v(" "),s("li",[s("strong",[t._v("缓存策略")]),t._v("：根据 "),s("code",[t._v("Cache-Control")]),t._v(" 响应头决定是否缓存\n"),s("ul",[s("li",[s("code",[t._v("public")]),t._v("：CDN 可以缓存")]),t._v(" "),s("li",[s("code",[t._v("private")]),t._v("：CDN 不缓存")]),t._v(" "),s("li",[s("code",[t._v("max-age")]),t._v("：控制缓存有效期")])])]),t._v(" "),s("li",[s("strong",[t._v("优势")]),t._v("：\n"),s("ul",[s("li",[t._v("就近访问：用户从最近的 CDN 节点获取资源，大幅减少延迟")]),t._v(" "),s("li",[t._v("减轻源服务器压力：大部分请求由 CDN 节点响应，无需回源")]),t._v(" "),s("li",[t._v("提升加载速度：CDN 节点通常带宽充足，传输速度快")])])]),t._v(" "),s("li",[s("strong",[t._v("缓存更新")]),t._v("：\n"),s("ul",[s("li",[t._v("通过文件版本号或 hash（如 "),s("code",[t._v("app.v1.2.3.js")]),t._v("）实现缓存更新")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("Cache-Control: max-age")]),t._v(" 控制缓存时间")]),t._v(" "),s("li",[t._v("支持手动刷新 CDN 缓存（Purge）")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ISP 缓存")])]),t._v(" "),s("ul",[s("li",[t._v("部分 ISP（互联网服务提供商）会在其网络中缓存热门资源")]),t._v(" "),s("li",[t._v("透明代理缓存，用户通常无感知")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("反向代理缓存（如 Nginx）")])]),t._v(" "),s("ul",[s("li",[t._v("服务器端的反向代理可以缓存响应")]),t._v(" "),s("li",[t._v("减少后端服务器压力，提升响应速度")])])])]),t._v(" "),s("p",[s("strong",[t._v("完整的缓存流程：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("用户请求\n  ↓\n浏览器缓存（Memory/Disk Cache）\n  ↓（未命中）\n路由器缓存（DNS/HTTP）\n  ↓（未命中）\nCDN 缓存（边缘节点）\n  ↓（未命中）\n反向代理缓存（Nginx）\n  ↓（未命中）\n源服务器\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("strong",[t._v("缓存控制机制：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("HTTP/1.0")]),t._v("："),s("code",[t._v("Expires")]),t._v(" 头（绝对时间）")]),t._v(" "),s("li",[s("strong",[t._v("HTTP/1.1")]),t._v("："),s("code",[t._v("Cache-Control")]),t._v(" 头（推荐使用）")])]),t._v(" "),s("p",[s("strong",[t._v("Cache-Control 常用指令：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("max-age=<seconds>")]),t._v("：缓存有效期（秒）")]),t._v(" "),s("li",[s("code",[t._v("public")]),t._v("：可被任何缓存（浏览器、CDN）缓存")]),t._v(" "),s("li",[s("code",[t._v("private")]),t._v("：仅浏览器缓存，不被共享缓存缓存")]),t._v(" "),s("li",[s("code",[t._v("no-cache")]),t._v("：使用前必须验证（协商缓存）")]),t._v(" "),s("li",[s("code",[t._v("no-store")]),t._v("：不缓存，每次从服务器获取")]),t._v(" "),s("li",[s("code",[t._v("must-revalidate")]),t._v("：过期后必须验证")]),t._v(" "),s("li",[s("code",[t._v("immutable")]),t._v("：资源不变，无需验证（适用于带版本号的静态资源）")])]),t._v(" "),s("p",[s("strong",[t._v("缓存验证（协商缓存）：")])]),t._v(" "),s("ul",[s("li",[t._v("验证请求头："),s("code",[t._v("If-None-Match")]),t._v("（ETag）、"),s("code",[t._v("If-Modified-Since")]),t._v("（Last-Modified）")]),t._v(" "),s("li",[t._v("服务器响应："),s("code",[t._v("304 Not Modified")]),t._v("（使用缓存）或 "),s("code",[t._v("200 OK")]),t._v("（返回新资源）")])]),t._v(" "),s("p",[s("strong",[t._v("缓存策略建议：")])]),t._v(" "),s("p",[s("strong",[t._v("1. 静态资源（JS/CSS/图片/字体等）")])]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("public, max-age=31536000, immutable")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("使用文件版本号或 hash（如 "),s("code",[t._v("app.abc123.js")]),t._v("）")]),t._v(" "),s("li",[t._v("长期缓存（1年），资源不变时无需验证")])]),t._v(" "),s("p",[s("strong",[t._v("2. HTML 文件")])]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("no-cache, must-revalidate")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("不缓存或短期缓存，确保及时获取更新")]),t._v(" "),s("li",[t._v("每次使用前验证，保证内容最新")])]),t._v(" "),s("p",[s("strong",[t._v("3. API 响应（数据接口）")])]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("private, max-age=300, stale-while-revalidate=3600")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("短期缓存（5分钟），过期后后台更新")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("private")]),t._v(" 避免共享缓存")])]),t._v(" "),s("p",[s("strong",[t._v("4. 用户相关数据")])]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("private, max-age=3600")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("仅浏览器缓存，不共享")]),t._v(" "),s("li",[t._v("根据数据更新频率设置缓存时间")])]),t._v(" "),s("p",[s("strong",[t._v("5. 敏感数据")])]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("no-store, no-cache, must-revalidate")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("完全不缓存，每次从服务器获取")])]),t._v(" "),s("p",[s("strong",[t._v("最佳实践：")])]),t._v(" "),s("ul",[s("li",[t._v("静态资源使用版本号/hash，设置长期缓存")]),t._v(" "),s("li",[t._v("HTML 使用协商缓存，确保及时更新")]),t._v(" "),s("li",[t._v("API 数据根据更新频率设置合适的缓存时间")]),t._v(" "),s("li",[t._v("利用 "),s("code",[t._v("stale-while-revalidate")]),t._v(" 提升用户体验")])]),t._v(" "),s("h2",{attrs:{id:"二、网络请求阶段"}},[t._v("二、网络请求阶段")]),t._v(" "),s("h3",{attrs:{id:"_1-dns-解析-domain-name-system"}},[t._v("1. DNS 解析（Domain Name System）")]),t._v(" "),s("p",[s("strong",[t._v("DNS 的作用是将域名转换为服务器的 IP 地址。")])]),t._v(" "),s("p",[s("strong",[t._v("DNS 查询顺序（递归查询）：")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("浏览器缓存")]),t._v("：检查浏览器自身的 DNS 缓存")]),t._v(" "),s("li",[s("strong",[t._v("操作系统缓存")]),t._v("：检查 "),s("code",[t._v("hosts")]),t._v(" 文件和系统 DNS 缓存")]),t._v(" "),s("li",[s("strong",[t._v("路由器缓存")]),t._v("：检查路由器 DNS 缓存")]),t._v(" "),s("li",[s("strong",[t._v("ISP DNS 缓存")]),t._v("：检查 ISP（互联网服务提供商）的 DNS 服务器缓存")]),t._v(" "),s("li",[s("strong",[t._v("DNS 递归查询")]),t._v("：\n"),s("ul",[s("li",[t._v("从根域名服务器开始查询")]),t._v(" "),s("li",[t._v("逐级查询："),s("code",[t._v(".com")]),t._v(" → "),s("code",[t._v("example.com")]),t._v(" → "),s("code",[t._v("www.example.com")])]),t._v(" "),s("li",[t._v("最终返回 IP 地址")]),t._v(" "),s("li",[s("strong",[t._v("可能存在负载均衡，导致每次 IP 不一样")])])])])]),t._v(" "),s("p",[s("strong",[t._v("为什么是逐级查询？")])]),t._v(" "),s("p",[t._v("DNS 采用"),s("strong",[t._v("分层树状结构")]),t._v("，每个域名服务器只负责自己管辖的域名区域：")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("根域名服务器（Root DNS）")]),t._v("：全球共 13 组根服务器，负责顶级域名（"),s("code",[t._v(".com")]),t._v("、"),s("code",[t._v(".org")]),t._v("、"),s("code",[t._v(".cn")]),t._v(" 等）")]),t._v(" "),s("li",[s("strong",[t._v("顶级域名服务器（TLD DNS）")]),t._v("：负责二级域名（如 "),s("code",[t._v(".com")]),t._v(" 下的所有域名）")]),t._v(" "),s("li",[s("strong",[t._v("权威域名服务器（Authoritative DNS）")]),t._v("：负责具体域名的解析（如 "),s("code",[t._v("baidu.com")]),t._v("）")])]),t._v(" "),s("p",[s("strong",[t._v("查询过程（以 "),s("code",[t._v("www.baidu.com")]),t._v(" 为例）：")])]),t._v(" "),s("p",[s("strong",[t._v("面试时这样表达：")])]),t._v(" "),s("blockquote",[s("p",[t._v('"当浏览器要访问 www.baidu.com 时，DNS 解析是逐级查询的：')]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("第一步")]),t._v("：客户端向本地 ISP 的 DNS 服务器发起查询")]),t._v(" "),s("li",[s("strong",[t._v("第二步")]),t._v('：ISP DNS 服务器不知道，就去问根域名服务器："www.baidu.com 的 IP 是多少？"')]),t._v(" "),s("li",[s("strong",[t._v("第三步")]),t._v('：根服务器回答："我不知道具体 IP，但我知道 .com 的服务器地址，你去问它"，然后返回 .com 服务器的地址')]),t._v(" "),s("li",[s("strong",[t._v("第四步")]),t._v('：ISP DNS 去问 .com 服务器："www.baidu.com 的 IP 是多少？"')]),t._v(" "),s("li",[s("strong",[t._v("第五步")]),t._v('：.com 服务器回答："我不知道具体 IP，但我知道 baidu.com 的权威服务器地址，你去问它"')]),t._v(" "),s("li",[s("strong",[t._v("第六步")]),t._v('：ISP DNS 去问 baidu.com 的权威服务器："www.baidu.com 的 IP 是多少？"')]),t._v(" "),s("li",[s("strong",[t._v("第七步")]),t._v("：权威服务器返回最终 IP 地址，比如 39.156.66.10")]),t._v(" "),s("li",[s("strong",[t._v("第八步")]),t._v('：ISP DNS 把 IP 返回给客户端，并缓存这个结果"')])])]),t._v(" "),s("p",[s("strong",[t._v("流程图：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('客户端 → ISP DNS 服务器\n  ↓\nISP DNS → 根服务器："www.baidu.com 的 IP？"\n  ↓\n根服务器："去问 .com 服务器"（返回 .com 服务器地址）\n  ↓\nISP DNS → .com 服务器："www.baidu.com 的 IP？"\n  ↓\n.com 服务器："去问 baidu.com 的权威服务器"（返回权威服务器地址）\n  ↓\nISP DNS → baidu.com 权威服务器："www.baidu.com 的 IP？"\n  ↓\n权威服务器："IP 是 39.156.66.10"\n  ↓\nISP DNS → 客户端：返回 IP 并缓存\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[s("strong",[t._v("面试回答要点（三步法）：")])]),t._v(" "),s("p",[s("strong",[t._v("1. 先说原理：")])]),t._v(" "),s("blockquote",[s("p",[t._v('"DNS 采用分层树状结构，每个服务器只管理自己的域名空间。就像查电话簿，先查省份，再查城市，最后查具体人名"')])]),t._v(" "),s("p",[s("strong",[t._v("2. 再说过程：")])]),t._v(" "),s("blockquote",[s("p",[t._v('"查询时从右到左逐级解析：先问根服务器（.com），再问顶级域名服务器（baidu.com），最后问权威服务器得到 IP"')])]),t._v(" "),s("p",[s("strong",[t._v("3. 最后说优化：")])]),t._v(" "),s("blockquote",[s("p",[t._v('"实际查询中，ISP DNS 服务器会缓存结果，所以大部分情况下不需要每次都走完整流程。而且客户端到 ISP DNS 是递归查询，客户端只发一次请求，后续查询都由 ISP DNS 完成"')])]),t._v(" "),s("p",[s("strong",[t._v("只有当所有本地缓存均未命中时，才会向 DNS 服务器发起真正的网络请求。")])]),t._v(" "),s("h3",{attrs:{id:"_2-建立-tcp-连接-三次握手"}},[t._v("2. 建立 TCP 连接（三次握手）")]),t._v(" "),s("p",[s("strong",[t._v("浏览器通过 TCP 协议与服务器建立可靠连接：")])]),t._v(" "),s("p",[s("strong",[t._v("三次握手过程：")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("第一次握手（SYN）")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("客户端发送一个 TCP 包，设置 "),s("code",[t._v("SYN=1")]),t._v("，序列号 "),s("code",[t._v("Seq=X")])]),t._v(" "),s("li",[t._v("客户端进入 "),s("code",[t._v("SYN_SENT")]),t._v(" 状态")]),t._v(" "),s("li",[t._v("表示客户端请求建立连接")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("第二次握手（SYN-ACK）")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("服务器收到请求后，返回响应包")]),t._v(" "),s("li",[t._v("设置 "),s("code",[t._v("SYN=1")]),t._v("，"),s("code",[t._v("ACK=X+1")]),t._v("，序列号 "),s("code",[t._v("Seq=Y")])]),t._v(" "),s("li",[t._v("服务器进入 "),s("code",[t._v("SYN_RCVD")]),t._v(" 状态")]),t._v(" "),s("li",[t._v("表示服务器确认客户端的连接请求，同时请求与客户端建立连接")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("第三次握手（ACK）")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("客户端发送确认包，设置 "),s("code",[t._v("ACK=Y+1")]),t._v("，序列号 "),s("code",[t._v("Seq=Z")])]),t._v(" "),s("li",[t._v("客户端和服务器都进入 "),s("code",[t._v("ESTABLISHED")]),t._v(" 状态")]),t._v(" "),s("li",[s("strong",[t._v("连接建立完成")]),t._v("，可以开始传输数据")])])])]),t._v(" "),s("p",[s("strong",[t._v("为什么需要三次握手？")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("确认双方的发送和接收能力")]),t._v("：确保客户端和服务器都能发送和接收数据")]),t._v(" "),s("li",[s("strong",[t._v("防止已失效的连接请求")]),t._v("：防止网络延迟导致的过期连接请求被服务器误认为是新连接")])]),t._v(" "),s("p",[s("strong",[t._v("为什么不能是两次？")])]),t._v(" "),s("ul",[s("li",[t._v("两次握手时，服务器无法确认客户端能接收数据")]),t._v(" "),s("li",[t._v("如果客户端发送的 SYN 因网络延迟卡住，客户端会重发。旧请求到达时，两次握手会让服务器误认为是新连接并建立连接，但客户端已关闭，导致服务器一直等待")])]),t._v(" "),s("p",[s("strong",[t._v("为什么不能是四次？")])]),t._v(" "),s("ul",[s("li",[t._v("三次已足够确认双方的双向通信能力，四次是多余的")])]),t._v(" "),s("p",[s("strong",[t._v("TCP 连接复用（Keep-Alive）：")])]),t._v(" "),s("ul",[s("li",[t._v("HTTP/1.1 默认启用 "),s("code",[t._v("Connection: keep-alive")])]),t._v(" "),s("li",[t._v("同一个 TCP 连接可以发送多个 HTTP 请求")]),t._v(" "),s("li",[t._v("减少 TCP 握手的开销")])]),t._v(" "),s("h3",{attrs:{id:"_3-tls-握手-仅-https"}},[t._v("3. TLS 握手（仅 HTTPS）")]),t._v(" "),s("p",[s("strong",[t._v("如果使用的是 HTTPS 协议，在 TCP 建立完成后，还需要进行 TLS 握手才能建立安全连接。")])]),t._v(" "),s("p",[s("strong",[t._v("为什么需要 TLS 握手？")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("验证服务器证书")]),t._v("：确保连接的是真正的目标服务器，防止中间人攻击")]),t._v(" "),s("li",[s("strong",[t._v("协商加密算法")]),t._v("：客户端和服务器协商出双方都支持的加密套件")]),t._v(" "),s("li",[s("strong",[t._v("协商对称加密密钥")]),t._v("：通过非对称加密（公钥/私钥）安全地协商出对称加密的共享密钥")])]),t._v(" "),s("h3",{attrs:{id:"_4-浏览器组装-http-请求报文"}},[t._v("4. 浏览器组装 HTTP 请求报文")]),t._v(" "),s("p",[s("strong",[t._v("浏览器构建 HTTP 请求报文，包括：")])]),t._v(" "),s("p",[s("strong",[t._v("请求行：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("GET /index.html HTTP/1.1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("请求方法：GET、POST、PUT、DELETE 等")]),t._v(" "),s("li",[t._v("请求路径：URL 的路径部分")]),t._v(" "),s("li",[t._v("HTTP 版本：HTTP/1.1 或 HTTP/2")])]),t._v(" "),s("p",[s("strong",[t._v("请求头（Request Headers）：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Host")]),t._v("：目标主机名（必需）")]),t._v(" "),s("li",[s("code",[t._v("User-Agent")]),t._v("：浏览器类型和版本")]),t._v(" "),s("li",[s("code",[t._v("Accept")]),t._v("：客户端可接受的内容类型")]),t._v(" "),s("li",[s("code",[t._v("Accept-Language")]),t._v("：客户端可接受的语言")]),t._v(" "),s("li",[s("code",[t._v("Accept-Encoding")]),t._v("：客户端可接受的编码（如 gzip）")]),t._v(" "),s("li",[s("code",[t._v("Cookie")]),t._v("：存储的 Cookie 信息")]),t._v(" "),s("li",[s("code",[t._v("Referer")]),t._v("：来源页面 URL")]),t._v(" "),s("li",[s("code",[t._v("Connection")]),t._v("：连接方式（keep-alive / close）")]),t._v(" "),s("li",[s("code",[t._v("Cache-Control")]),t._v("：缓存控制")]),t._v(" "),s("li",[s("code",[t._v("If-None-Match")]),t._v(" / "),s("code",[t._v("If-Modified-Since")]),t._v("：缓存验证（协商缓存）")])]),t._v(" "),s("p",[s("strong",[t._v("请求体（Request Body）：")])]),t._v(" "),s("ul",[s("li",[t._v("GET 请求通常没有请求体")]),t._v(" "),s("li",[t._v("POST、PUT 请求包含请求数据（表单数据、JSON 等）")])]),t._v(" "),s("h3",{attrs:{id:"_5-发送-http-请求"}},[t._v("5. 发送 HTTP 请求")]),t._v(" "),s("p",[s("strong",[t._v("浏览器通过已建立的 TCP/TLS 连接发送 HTTP 请求报文给服务器。")])]),t._v(" "),s("h2",{attrs:{id:"三、服务器处理阶段"}},[t._v("三、服务器处理阶段")]),t._v(" "),s("h3",{attrs:{id:"_1-服务器接收与路由"}},[t._v("1. 服务器接收与路由")]),t._v(" "),s("p",[s("strong",[t._v("服务器（如 Nginx、Apache）接收到 HTTP 请求后，首先进行请求解析和路由：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("解析请求头")]),t._v("：提取请求方法、路径、协议版本、请求头信息")]),t._v(" "),s("li",[s("strong",[t._v("缓存验证")]),t._v("：检查 HTTP 请求头中的缓存验证信息（如 "),s("code",[t._v("If-None-Match")]),t._v("、"),s("code",[t._v("If-Modified-Since")]),t._v("）\n"),s("ul",[s("li",[t._v("如果资源未修改，返回 "),s("strong",[t._v("304 Not Modified")]),t._v("，客户端使用本地缓存")]),t._v(" "),s("li",[t._v("如果资源已修改或不存在，继续处理请求")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-请求处理流程"}},[t._v("2. 请求处理流程")]),t._v(" "),s("p",[s("strong",[t._v("典型的服务器架构（Nginx 作为反向代理）：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("客户端请求 → Nginx（反向代理服务器）\n              ↓\n        ┌─────┴─────┐\n        ↓           ↓\n   静态资源      动态请求\n   (直接返回)    (转发后端)\n                  ↓\n           后端应用服务器\n           (Node.js/Java等)\n                  ↓\n              数据库/缓存\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("strong",[t._v("处理流程：")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("静态资源请求")])]),t._v(" "),s("ul",[s("li",[t._v("Nginx 直接返回文件系统中的静态文件（HTML、CSS、JS、图片等）")]),t._v(" "),s("li",[t._v("无需转发到后端，响应最快")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("动态请求（需要后端处理）")])]),t._v(" "),s("ul",[s("li",[t._v("Nginx 作为"),s("strong",[t._v("反向代理")]),t._v("，将请求转发到后端应用服务器")]),t._v(" "),s("li",[t._v("后端应用服务器处理：\n"),s("ul",[s("li",[t._v("执行业务逻辑")]),t._v(" "),s("li",[t._v("访问数据库或缓存获取数据")]),t._v(" "),s("li",[t._v("进行数据计算和处理")]),t._v(" "),s("li",[t._v("生成 HTML 或 JSON 响应")])])]),t._v(" "),s("li",[t._v("响应通过 Nginx 返回给客户端")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-返回-http-响应"}},[t._v("3. 返回 HTTP 响应")]),t._v(" "),s("p",[s("strong",[t._v("服务器构建并返回 HTTP 响应报文，主要包含：")])]),t._v(" "),s("p",[s("strong",[t._v("状态行：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("HTTP/1.1 200 OK\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("200 OK")]),t._v("：请求成功")]),t._v(" "),s("li",[s("code",[t._v("301 Moved Permanently")]),t._v("：永久重定向")]),t._v(" "),s("li",[s("code",[t._v("302 Found")]),t._v("：临时重定向")]),t._v(" "),s("li",[s("code",[t._v("304 Not Modified")]),t._v("：缓存有效（协商缓存）")]),t._v(" "),s("li",[s("code",[t._v("400 Bad Request")]),t._v("：请求错误")]),t._v(" "),s("li",[s("code",[t._v("401 Unauthorized")]),t._v("：未授权")]),t._v(" "),s("li",[s("code",[t._v("403 Forbidden")]),t._v("：禁止访问")]),t._v(" "),s("li",[s("code",[t._v("404 Not Found")]),t._v("：资源不存在")]),t._v(" "),s("li",[s("code",[t._v("500 Internal Server Error")]),t._v("：服务器错误")]),t._v(" "),s("li",[s("code",[t._v("502 Bad Gateway")]),t._v("：网关错误")]),t._v(" "),s("li",[s("code",[t._v("503 Service Unavailable")]),t._v("：服务不可用")])]),t._v(" "),s("p",[s("strong",[t._v("响应头（Response Headers）：")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Content-Type")]),t._v("：资源类型（"),s("code",[t._v("text/html")]),t._v("、"),s("code",[t._v("application/json")]),t._v("、"),s("code",[t._v("image/png")]),t._v(" 等）")]),t._v(" "),s("li",[s("code",[t._v("Content-Length")]),t._v("：响应体大小（字节）")]),t._v(" "),s("li",[s("code",[t._v("Content-Encoding")]),t._v("：内容编码（如 "),s("code",[t._v("gzip")]),t._v("、"),s("code",[t._v("br")]),t._v("）")]),t._v(" "),s("li",[s("code",[t._v("Cache-Control")]),t._v("：缓存控制策略")]),t._v(" "),s("li",[s("code",[t._v("ETag")]),t._v("：资源版本标识（用于协商缓存）")]),t._v(" "),s("li",[s("code",[t._v("Last-Modified")]),t._v("：资源最后修改时间（用于协商缓存）")]),t._v(" "),s("li",[s("code",[t._v("Set-Cookie")]),t._v("：设置 Cookie")]),t._v(" "),s("li",[s("code",[t._v("Location")]),t._v("：重定向目标 URL（用于 301/302）")]),t._v(" "),s("li",[s("code",[t._v("Access-Control-Allow-Origin")]),t._v("：CORS 跨域控制")])]),t._v(" "),s("p",[s("strong",[t._v("响应体（Response Body）：")])]),t._v(" "),s("ul",[s("li",[t._v("HTML 文档")]),t._v(" "),s("li",[t._v("JSON 数据")]),t._v(" "),s("li",[t._v("二进制资源（图片、视频、字体等）")])]),t._v(" "),s("h2",{attrs:{id:"四、浏览器接收响应阶段"}},[t._v("四、浏览器接收响应阶段")]),t._v(" "),s("h3",{attrs:{id:"_1-接收-http-响应"}},[t._v("1. 接收 HTTP 响应")]),t._v(" "),s("p",[s("strong",[t._v("浏览器接收服务器返回的 HTTP 响应报文：")])]),t._v(" "),s("ul",[s("li",[t._v("解析状态码，判断请求是否成功")]),t._v(" "),s("li",[t._v("解析响应头，提取缓存信息、内容类型等")]),t._v(" "),s("li",[t._v("接收响应体数据（可能是流式接收）")])]),t._v(" "),s("h3",{attrs:{id:"_2-处理重定向"}},[t._v("2. 处理重定向")]),t._v(" "),s("p",[s("strong",[t._v("如果服务器返回 301 或 302 重定向：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器读取 "),s("code",[t._v("Location")]),t._v(" 响应头，获取重定向目标 URL")]),t._v(" "),s("li",[s("strong",[t._v("自动发起新的请求")]),t._v("到重定向 URL")]),t._v(" "),s("li",[t._v("重定向可能会发生多次（浏览器通常限制重定向次数，如 20 次）")]),t._v(" "),s("li",[t._v("重定向会增加额外的网络请求，影响性能")])]),t._v(" "),s("p",[s("strong",[t._v("重定向类型：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("301 永久重定向")]),t._v("：浏览器会缓存重定向关系，后续直接访问新 URL")]),t._v(" "),s("li",[s("strong",[t._v("302 临时重定向")]),t._v("：每次都需要重定向，不缓存")])]),t._v(" "),s("h3",{attrs:{id:"_3-处理缓存响应"}},[t._v("3. 处理缓存响应")]),t._v(" "),s("p",[s("strong",[t._v("如果服务器返回 304 Not Modified：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器使用本地缓存资源")]),t._v(" "),s("li",[t._v("不下载响应体，节省带宽和时间")])]),t._v(" "),s("p",[s("strong",[t._v("如果服务器返回 200 OK：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器接收新资源")]),t._v(" "),s("li",[t._v("根据响应头更新缓存（"),s("code",[t._v("Cache-Control")]),t._v("、"),s("code",[t._v("ETag")]),t._v("、"),s("code",[t._v("Last-Modified")]),t._v("）")])]),t._v(" "),s("h3",{attrs:{id:"_4-解压响应内容"}},[t._v("4. 解压响应内容")]),t._v(" "),s("p",[s("strong",[t._v("如果响应使用了压缩（"),s("code",[t._v("Content-Encoding: gzip")]),t._v("）：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器自动解压响应体")]),t._v(" "),s("li",[t._v("支持 gzip、deflate、br（Brotli）等压缩格式")])]),t._v(" "),s("h3",{attrs:{id:"_5-开始解析-html"}},[t._v("5. 开始解析 HTML")]),t._v(" "),s("p",[s("strong",[t._v("浏览器接收到 HTML 数据后，开始解析和渲染流程。")])]),t._v(" "),s("h2",{attrs:{id:"五、浏览器渲染阶段-核心重点"}},[t._v("五、浏览器渲染阶段（核心重点）")]),t._v(" "),s("p",[t._v("当浏览器接收到 HTML 数据后，渲染引擎开始工作。这是整个页面展示过程中最关键的部分，直接影响首屏渲染速度和用户体验。")]),t._v(" "),s("h3",{attrs:{id:"渲染流程概览"}},[t._v("渲染流程概览")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("HTML 字节流 → DOM 树 → CSSOM 树 → 渲染树 → 布局 → 绘制 → 分层 → 合成 → 屏幕显示\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_1-构建-dom-树-dom-tree"}},[t._v("1. 构建 DOM 树（DOM Tree）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器接收到 HTML 字节流后，"),s("strong",[t._v("自上而下逐行解析")])]),t._v(" "),s("li",[t._v("将 HTML 标签转换为 "),s("strong",[t._v("DOM 节点")]),t._v("（Node）")]),t._v(" "),s("li",[t._v("根据标签的嵌套关系，形成树形结构")]),t._v(" "),s("li",[t._v("每个节点包含标签名、属性、子节点等信息")])]),t._v(" "),s("p",[s("strong",[t._v("特点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("渐进式解析")]),t._v("：遇到 "),s("code",[t._v("<script>")]),t._v(" 标签会暂停 DOM 解析，执行完 JS 后继续")]),t._v(" "),s("li",[s("strong",[t._v("容错机制")]),t._v("：浏览器会自动修复一些 HTML 错误（如未闭合标签）")]),t._v(" "),s("li",[s("strong",[t._v("解析是异步的")]),t._v("：不会阻塞其他资源的下载")])]),t._v(" "),s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("页面标题"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("解析后形成：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Document\n└── html\n    ├── head\n    │   └── title\n    │       └── "页面标题"\n    └── body\n        └── div\n            └── "内容"\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[t._v("减少 DOM 层级深度")]),t._v(" "),s("li",[t._v("避免在 HTML 中写大量内联样式和脚本")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("defer")]),t._v(" 或 "),s("code",[t._v("async")]),t._v(" 属性延迟脚本执行")])]),t._v(" "),s("p",[s("strong",[t._v("资源加载时机：")])]),t._v(" "),s("p",[t._v("在 HTML 解析过程中，遇到以下资源标签会触发额外的网络请求：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('<link rel="stylesheet">')]),t._v("：CSS 样式表")]),t._v(" "),s("li",[s("code",[t._v('<script src="">')]),t._v("：JavaScript 脚本")]),t._v(" "),s("li",[s("code",[t._v('<img src="">')]),t._v("：图片资源")]),t._v(" "),s("li",[s("code",[t._v('<video src="">')]),t._v("、"),s("code",[t._v('<audio src="">')]),t._v("：媒体资源")]),t._v(" "),s("li",[s("code",[t._v('<iframe src="">')]),t._v("：嵌入页面")]),t._v(" "),s("li",[s("code",[t._v("@font-face")]),t._v("：字体文件")])]),t._v(" "),s("p",[s("strong",[t._v("关键点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("同步 JavaScript 会阻塞 DOM 解析")]),t._v("：遇到 "),s("code",[t._v("<script>")]),t._v(" 标签时，浏览器会暂停 DOM 解析，下载并执行脚本")]),t._v(" "),s("li",[s("strong",[t._v("CSS 会阻塞渲染")]),t._v("：必须等待 CSS 解析完成才能构建渲染树")]),t._v(" "),s("li",[s("strong",[t._v("图片不会阻塞渲染")]),t._v("：图片加载是异步的，但会影响页面布局（如果未设置尺寸）")]),t._v(" "),s("li",[s("strong",[t._v("资源加载是并行的")]),t._v("：浏览器会并行下载多个资源（受同域连接数限制，HTTP/1.1 通常是 6-8 个）")])]),t._v(" "),s("h3",{attrs:{id:"_2-构建-cssom-树-css-object-model"}},[t._v("2. 构建 CSSOM 树（CSS Object Model）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("解析所有 CSS 资源（外链 CSS、内联 "),s("code",[t._v("<style>")]),t._v("、行内样式）")]),t._v(" "),s("li",[t._v("将 CSS 规则转换为 "),s("strong",[t._v("CSSOM 树")])]),t._v(" "),s("li",[t._v("计算每个节点的最终样式（继承、层叠、优先级）")])]),t._v(" "),s("p",[s("strong",[t._v("特点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CSS 解析会阻塞渲染")]),t._v("：浏览器必须等待 CSS 解析完成才能构建渲染树")]),t._v(" "),s("li",[s("strong",[t._v("不会阻塞 DOM 解析")]),t._v("：DOM 和 CSSOM 的构建是并行的")]),t._v(" "),s("li",[s("strong",[t._v("CSS 选择器从右到左匹配")]),t._v("："),s("code",[t._v("div p span")]),t._v(" 先找 "),s("code",[t._v("span")]),t._v("，再找 "),s("code",[t._v("p")]),t._v("，最后找 "),s("code",[t._v("div")])])]),t._v(" "),s("p",[s("strong",[t._v("CSS 阻塞渲染的原因：")])]),t._v(" "),s("ul",[s("li",[t._v("如果 CSS 未加载完成就渲染，可能出现 "),s("strong",[t._v("FOUC（Flash of Unstyled Content）")]),t._v(" 闪烁")]),t._v(" "),s("li",[t._v("浏览器会等待 CSS 解析完成，确保首次渲染就是正确的样式")])]),t._v(" "),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[t._v("将关键 CSS 内联到 HTML 中（Critical CSS）")]),t._v(" "),s("li",[t._v("非关键 CSS 使用 "),s("code",[t._v("media")]),t._v(" 属性延迟加载："),s("code",[t._v('<link rel="stylesheet" media="print" href="print.css">')])]),t._v(" "),s("li",[t._v("避免使用过于复杂的选择器（如 "),s("code",[t._v("div > ul > li > a > span")]),t._v("）")]),t._v(" "),s("li",[t._v("减少 CSS 文件数量和大小")])]),t._v(" "),s("h3",{attrs:{id:"_3-生成渲染树-render-tree"}},[t._v("3. 生成渲染树（Render Tree）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("将 "),s("strong",[t._v("DOM 树")]),t._v(" 和 "),s("strong",[t._v("CSSOM 树")]),t._v(" 合并")]),t._v(" "),s("li",[t._v("遍历 DOM 树，为每个可见节点找到对应的 CSS 规则")]),t._v(" "),s("li",[t._v("计算每个节点的最终样式（继承、层叠、优先级）")]),t._v(" "),s("li",[t._v("生成只包含"),s("strong",[t._v("可见元素")]),t._v("的渲染树")])]),t._v(" "),s("p",[s("strong",[t._v("关键点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("只包含可见节点")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("display: none")]),t._v(" 的元素"),s("strong",[t._v("不会")]),t._v("出现在渲染树中")]),t._v(" "),s("li",[s("code",[t._v("visibility: hidden")]),t._v(" 的元素"),s("strong",[t._v("会")]),t._v("出现在渲染树中（占据空间但不显示）")]),t._v(" "),s("li",[s("code",[t._v("<head>")]),t._v("、"),s("code",[t._v("<script>")]),t._v(" 等不可见元素会被剔除")])])]),t._v(" "),s("li",[s("strong",[t._v("每个节点包含完整的样式信息")]),t._v("：位置、大小、颜色、字体等")])]),t._v(" "),s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("隐藏内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("可见内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("渲染树中只包含 "),s("code",[t._v("<p>")]),t._v(" 节点，不包含 "),s("code",[t._v("<div>")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_4-布局-layout-reflow-回流"}},[t._v("4. 布局（Layout / Reflow 回流）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("计算渲染树中每个节点的"),s("strong",[t._v("几何信息")]),t._v("：\n"),s("ul",[s("li",[t._v("位置坐标（x, y）")]),t._v(" "),s("li",[t._v("尺寸大小（width, height）")]),t._v(" "),s("li",[t._v("边框、内边距、外边距")])])]),t._v(" "),s("li",[t._v("确定元素在页面中的"),s("strong",[t._v("精确位置和大小")])]),t._v(" "),s("li",[t._v("这是一个"),s("strong",[t._v("自上而下、可能递归")]),t._v("的过程（因为某些元素的大小依赖于子元素）")])]),t._v(" "),s("p",[s("strong",[t._v("触发回流的操作：")])]),t._v(" "),s("ul",[s("li",[t._v("修改 DOM 结构（添加、删除、移动节点）")]),t._v(" "),s("li",[t._v("修改元素的尺寸相关属性：\n"),s("ul",[s("li",[s("code",[t._v("width")]),t._v("、"),s("code",[t._v("height")]),t._v("、"),s("code",[t._v("padding")]),t._v("、"),s("code",[t._v("margin")])]),t._v(" "),s("li",[s("code",[t._v("border-width")]),t._v("、"),s("code",[t._v("min-height")]),t._v(" 等")])])]),t._v(" "),s("li",[t._v("修改布局相关属性：\n"),s("ul",[s("li",[s("code",[t._v("position")]),t._v("、"),s("code",[t._v("float")]),t._v("、"),s("code",[t._v("display")])]),t._v(" "),s("li",[s("code",[t._v("flex")]),t._v("、"),s("code",[t._v("grid")]),t._v(" 布局属性")])])]),t._v(" "),s("li",[t._v("读取布局信息（如 "),s("code",[t._v("offsetWidth")]),t._v("、"),s("code",[t._v("scrollTop")]),t._v("、"),s("code",[t._v("getBoundingClientRect()")]),t._v("）")]),t._v(" "),s("li",[t._v("窗口大小改变（"),s("code",[t._v("resize")]),t._v(" 事件）")]),t._v(" "),s("li",[t._v("字体大小改变")])]),t._v(" "),s("p",[s("strong",[t._v("性能影响：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("回流是性能杀手")]),t._v("：会触发后续的绘制和合成，成本很高")]),t._v(" "),s("li",[s("strong",[t._v("强制同步布局")]),t._v("：读取布局属性会强制浏览器立即执行回流，导致性能问题")])]),t._v(" "),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[t._v("批量修改 DOM，使用 "),s("code",[t._v("DocumentFragment")]),t._v(" 或虚拟 DOM")]),t._v(" "),s("li",[t._v("避免频繁读取布局属性，先读取后修改")]),t._v(" "),s("li",[t._v("使用 CSS3 的 "),s("code",[t._v("transform")]),t._v(" 和 "),s("code",[t._v("opacity")]),t._v(" 代替修改位置和尺寸（不会触发回流）")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("absolute")]),t._v(" 或 "),s("code",[t._v("fixed")]),t._v(" 定位，脱离文档流，减少影响范围")])]),t._v(" "),s("h3",{attrs:{id:"_5-绘制-painting-repaint-重绘"}},[t._v("5. 绘制（Painting / Repaint 重绘）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("将布局阶段计算好的元素"),s("strong",[t._v("绘制成位图（bitmap）")])]),t._v(" "),s("li",[t._v("包括元素的视觉表现：\n"),s("ul",[s("li",[t._v("背景色、背景图")]),t._v(" "),s("li",[t._v("文本内容、字体样式")]),t._v(" "),s("li",[t._v("边框、阴影")]),t._v(" "),s("li",[t._v("图片、视频等")])])]),t._v(" "),s("li",[s("strong",[t._v("不处理几何位置")]),t._v('，只负责"画"出元素的外观')])]),t._v(" "),s("p",[s("strong",[t._v("触发重绘的操作：")])]),t._v(" "),s("ul",[s("li",[t._v("修改颜色相关属性："),s("code",[t._v("color")]),t._v("、"),s("code",[t._v("background-color")]),t._v("、"),s("code",[t._v("border-color")])]),t._v(" "),s("li",[t._v("修改视觉效果："),s("code",[t._v("box-shadow")]),t._v("、"),s("code",[t._v("outline")]),t._v("、"),s("code",[t._v("opacity")])]),t._v(" "),s("li",[t._v("修改背景："),s("code",[t._v("background-image")]),t._v("、"),s("code",[t._v("background-position")])]),t._v(" "),s("li",[t._v("修改字体："),s("code",[t._v("font-size")]),t._v("、"),s("code",[t._v("font-family")]),t._v("、"),s("code",[t._v("text-decoration")])])]),t._v(" "),s("p",[s("strong",[t._v("性能影响：")])]),t._v(" "),s("ul",[s("li",[t._v("重绘比回流成本低，但仍需要重新计算像素")]),t._v(" "),s("li",[t._v("如果频繁重绘，仍会影响性能")])]),t._v(" "),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[t._v("避免频繁修改样式")]),t._v(" "),s("li",[t._v("使用 CSS3 硬件加速属性（"),s("code",[t._v("transform")]),t._v("、"),s("code",[t._v("opacity")]),t._v("）")]),t._v(" "),s("li",[t._v("合理使用 "),s("code",[t._v("will-change")]),t._v(" 提示浏览器优化")])]),t._v(" "),s("h3",{attrs:{id:"_6-layerize-分层"}},[t._v("6. Layerize（分层）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器根据特定规则将某些元素"),s("strong",[t._v("提升为独立的合成层（Layer）")])]),t._v(" "),s("li",[t._v("每个层都有自己的绘制上下文")]),t._v(" "),s("li",[t._v("为后续的合成阶段做准备")])]),t._v(" "),s("p",[s("strong",[t._v("会被提升为独立图层的元素：")])]),t._v(" "),s("ul",[s("li",[t._v("使用 "),s("code",[t._v("transform")]),t._v(" 或 "),s("code",[t._v("opacity")]),t._v(" 的元素（CSS3 硬件加速）")]),t._v(" "),s("li",[s("code",[t._v("position: fixed")]),t._v(" 或 "),s("code",[t._v("position: sticky")]),t._v(" 的元素")]),t._v(" "),s("li",[t._v("设置了 "),s("code",[t._v("will-change")]),t._v(" 属性的元素")]),t._v(" "),s("li",[s("code",[t._v("<video>")]),t._v("、"),s("code",[t._v("<canvas>")]),t._v("、"),s("code",[t._v("<iframe>")]),t._v(" 等元素")]),t._v(" "),s("li",[t._v("有 3D 变换的元素（"),s("code",[t._v("transform: translateZ(0)")]),t._v("）")]),t._v(" "),s("li",[t._v("有 "),s("code",[t._v("filter")]),t._v(" 效果的元素（如 "),s("code",[t._v("blur")]),t._v("、"),s("code",[t._v("opacity")]),t._v("）")])]),t._v(" "),s("p",[s("strong",[t._v("为什么需要分层？")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("独立渲染")]),t._v("：每个层可以独立绘制和更新，互不影响")]),t._v(" "),s("li",[s("strong",[t._v("GPU 加速")]),t._v("：合成层可以交给 GPU 处理，性能更好")]),t._v(" "),s("li",[s("strong",[t._v("减少重绘范围")]),t._v("：修改某个层的内容时，只需要重绘该层，不影响其他层")])]),t._v(" "),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[t._v("合理使用 "),s("code",[t._v("transform")]),t._v(" 和 "),s("code",[t._v("opacity")]),t._v(" 触发硬件加速")]),t._v(" "),s("li",[t._v("避免过度使用 "),s("code",[t._v("will-change")]),t._v("（会占用内存）")]),t._v(" "),s("li",[t._v("使用 Chrome DevTools 的 Layers 面板查看分层情况")])]),t._v(" "),s("h3",{attrs:{id:"_7-compositing-合成"}},[t._v("7. Compositing（合成）")]),t._v(" "),s("p",[s("strong",[t._v("过程：")])]),t._v(" "),s("ul",[s("li",[t._v("由 "),s("strong",[t._v("合成线程（Compositor Thread）")]),t._v(" 完成")]),t._v(" "),s("li",[t._v("将各个独立的图层按照正确的顺序"),s("strong",[t._v("合成为一个最终的图像")])]),t._v(" "),s("li",[t._v("处理图层的变换、透明度、混合等效果")]),t._v(" "),s("li",[t._v("最终交给 "),s("strong",[t._v("GPU")]),t._v(" 显示到屏幕上")])]),t._v(" "),s("p",[s("strong",[t._v("关键特点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("不阻塞主线程")]),t._v("：合成在独立的合成线程中进行")]),t._v(" "),s("li",[s("strong",[t._v("GPU 加速")]),t._v("：利用 GPU 的并行处理能力，性能极佳")]),t._v(" "),s("li",[s("strong",[t._v("只处理图层变换")]),t._v("：如果只修改 "),s("code",[t._v("transform")]),t._v(" 或 "),s("code",[t._v("opacity")]),t._v("，可以跳过布局和绘制，直接合成")])]),t._v(" "),s("p",[s("strong",[t._v("合成线程的优势：")])]),t._v(" "),s("ul",[s("li",[t._v("即使主线程被 JavaScript 阻塞，合成线程仍可以继续工作")]),t._v(" "),s("li",[t._v("滚动、动画等操作可以非常流畅")]),t._v(" "),s("li",[t._v("这就是为什么使用 "),s("code",[t._v("transform")]),t._v(" 做动画比修改 "),s("code",[t._v("left")]),t._v("、"),s("code",[t._v("top")]),t._v(" 性能更好的原因")])]),t._v(" "),s("p",[s("strong",[t._v("优化建议：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("优先使用 "),s("code",[t._v("transform")]),t._v(" 和 "),s("code",[t._v("opacity")]),t._v(" 做动画")]),t._v("（只触发合成，不触发回流和重绘）")]),t._v(" "),s("li",[t._v("避免在动画中修改会触发回流的属性")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("requestAnimationFrame")]),t._v(" 优化动画性能")])]),t._v(" "),s("h3",{attrs:{id:"渲染性能优化总结"}},[t._v("渲染性能优化总结")]),t._v(" "),s("p",[s("strong",[t._v("性能从好到差：")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("只触发合成")]),t._v("："),s("code",[t._v("transform")]),t._v("、"),s("code",[t._v("opacity")]),t._v("（最佳）")]),t._v(" "),s("li",[s("strong",[t._v("触发重绘")]),t._v("：颜色、背景等视觉属性")]),t._v(" "),s("li",[s("strong",[t._v("触发回流")]),t._v("：尺寸、位置等布局属性（最差）")])]),t._v(" "),s("p",[s("strong",[t._v("优化原则：")])]),t._v(" "),s("ul",[s("li",[t._v("减少回流和重绘的次数")]),t._v(" "),s("li",[t._v("使用 CSS3 硬件加速")]),t._v(" "),s("li",[t._v("批量修改 DOM")]),t._v(" "),s("li",[t._v("避免强制同步布局")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("requestAnimationFrame")]),t._v(" 优化动画")])]),t._v(" "),s("h3",{attrs:{id:"关键概念对比"}},[t._v("关键概念对比")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("概念")]),t._v(" "),s("th",[t._v("触发条件")]),t._v(" "),s("th",[t._v("性能影响")]),t._v(" "),s("th",[t._v("优化方法")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("回流（Reflow）")])]),t._v(" "),s("td",[t._v("修改布局属性（width、height、position 等）")]),t._v(" "),s("td",[t._v("高（会触发重绘和合成）")]),t._v(" "),s("td",[t._v("使用 transform 代替")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("重绘（Repaint）")])]),t._v(" "),s("td",[t._v("修改视觉属性（color、background 等）")]),t._v(" "),s("td",[t._v("中（会触发合成）")]),t._v(" "),s("td",[t._v("批量修改样式")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("合成（Composite）")])]),t._v(" "),s("td",[t._v("修改 transform、opacity")]),t._v(" "),s("td",[t._v("低（GPU 加速）")]),t._v(" "),s("td",[t._v("优先使用这两个属性")])])])]),t._v(" "),s("h2",{attrs:{id:"六、后续阶段"}},[t._v("六、后续阶段")]),t._v(" "),s("p",[t._v("页面首次渲染完成后，浏览器还会继续处理各种交互和资源加载")]),t._v(" "),s("h3",{attrs:{id:"_1-资源加载时机"}},[t._v("1. 资源加载时机")]),t._v(" "),s("p",[t._v("在 HTML 解析过程中，遇到以下资源会触发额外请求：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("<img>")]),t._v(" 图片资源")]),t._v(" "),s("li",[s("code",[t._v("<link>")]),t._v(" CSS 样式表")]),t._v(" "),s("li",[s("code",[t._v("<script>")]),t._v(" JavaScript 脚本")]),t._v(" "),s("li",[s("code",[t._v("<video>")]),t._v("、"),s("code",[t._v("<audio>")]),t._v(" 媒体资源")]),t._v(" "),s("li",[s("code",[t._v("<iframe>")]),t._v(" 嵌入页面")]),t._v(" "),s("li",[s("code",[t._v("@font-face")]),t._v(" 字体文件")])]),t._v(" "),s("p",[s("strong",[t._v("关键点：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("同步 JS 会阻塞 DOM 解析")]),t._v("：遇到 "),s("code",[t._v("<script>")]),t._v(" 标签时，浏览器会暂停 DOM 解析，下载并执行脚本")]),t._v(" "),s("li",[s("strong",[t._v("CSS 会阻塞渲染")]),t._v("：必须等待 CSS 解析完成才能构建渲染树")]),t._v(" "),s("li",[t._v("CSS 不会阻塞 JS 的下载，但会阻塞 JS 的执行; JS 会阻塞 HTML 的解析")]),t._v(" "),s("li",[s("strong",[t._v("图片不会阻塞渲染")]),t._v("：图片加载是异步的，但会影响页面布局（如果未设置尺寸）")])]),t._v(" "),s("p",[s("strong",[t._v("JavaScript 解析与执行流程：")])]),t._v(" "),s("p",[s("strong",[t._v("1. HTML 解析阶段（document.readyState = 'loading'）")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器创建 Document 对象并解析 HTML")]),t._v(" "),s("li",[t._v("将解析到的元素和文本节点添加到文档中")]),t._v(" "),s("li",[t._v("此时 "),s("code",[t._v("document.readyState")]),t._v(" 为 "),s("code",[t._v("'loading'")])])]),t._v(" "),s("p",[s("strong",[t._v("2. 同步脚本执行（阻塞解析）")])]),t._v(" "),s("ul",[s("li",[t._v("遇到"),s("strong",[t._v("没有 "),s("code",[t._v("async")]),t._v(" 和 "),s("code",[t._v("defer")]),t._v(" 的 "),s("code",[t._v("<script>")])]),t._v(" 时：\n"),s("ul",[s("li",[t._v("暂停 HTML 解析")]),t._v(" "),s("li",[t._v("下载并执行脚本（行内或外部）")]),t._v(" "),s("li",[t._v("脚本执行完成后继续解析")])])]),t._v(" "),s("li",[s("strong",[t._v("特点")]),t._v("：\n"),s("ul",[s("li",[t._v("可以使用 "),s("code",[t._v("document.write()")]),t._v(" 插入内容")]),t._v(" "),s("li",[t._v("可以访问 "),s("code",[t._v("script")]),t._v(" 标签之前的 DOM 内容")]),t._v(" "),s("li",[t._v("常用于定义函数和注册事件处理程序")])])])]),t._v(" "),s("p",[s("strong",[t._v("3. 异步脚本执行（async）")])]),t._v(" "),s("ul",[s("li",[t._v("遇到"),s("strong",[t._v("设置了 "),s("code",[t._v("async")]),t._v(" 的 "),s("code",[t._v("<script>")])]),t._v(" 时：\n"),s("ul",[s("li",[t._v("开始下载脚本（不阻塞解析）")]),t._v(" "),s("li",[t._v("HTML 解析继续进行")]),t._v(" "),s("li",[t._v("脚本下载完成后立即执行（可能在解析完成前）")])])]),t._v(" "),s("li",[s("strong",[t._v("特点")]),t._v("：\n"),s("ul",[s("li",[s("strong",[t._v("禁止使用 "),s("code",[t._v("document.write()")])])]),t._v(" "),s("li",[t._v("可以访问自己 "),s("code",[t._v("script")]),t._v(" 标签和之前的 DOM 元素")]),t._v(" "),s("li",[t._v("多个 "),s("code",[t._v("async")]),t._v(" 脚本执行顺序不确定")])])])]),t._v(" "),s("p",[s("strong",[t._v("4. 文档解析完成（document.readyState = 'interactive'）")])]),t._v(" "),s("ul",[s("li",[t._v("HTML 解析完成，"),s("code",[t._v("document.readyState")]),t._v(" 变为 "),s("code",[t._v("'interactive'")])]),t._v(" "),s("li",[s("strong",[t._v("延迟脚本（defer）执行")]),t._v("：\n"),s("ul",[s("li",[t._v("所有 "),s("code",[t._v("defer")]),t._v(" 脚本按在文档中出现的顺序执行")]),t._v(" "),s("li",[t._v("可以访问完整的文档树")]),t._v(" "),s("li",[s("strong",[t._v("禁止使用 "),s("code",[t._v("document.write()")])])])])]),t._v(" "),s("li",[s("strong",[t._v("触发 "),s("code",[t._v("DOMContentLoaded")]),t._v(" 事件")]),t._v("：\n"),s("ul",[s("li",[t._v("表示 DOM 已完全解析")]),t._v(" "),s("li",[t._v("此时可以安全地操作 DOM")])])])]),t._v(" "),s("p",[s("strong",[t._v("5. 资源加载完成（document.readyState = 'complete'）")])]),t._v(" "),s("ul",[s("li",[t._v("等待图片、字体等资源加载完成")]),t._v(" "),s("li",[t._v("等待所有异步脚本执行完成")]),t._v(" "),s("li",[s("code",[t._v("document.readyState")]),t._v(" 变为 "),s("code",[t._v("'complete'")])]),t._v(" "),s("li",[s("strong",[t._v("触发 "),s("code",[t._v("window.load")]),t._v(" 事件")]),t._v("：\n"),s("ul",[s("li",[t._v("表示页面所有资源都已加载完成")])])])]),t._v(" "),s("p",[s("strong",[t._v("执行时机对比：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("HTML 解析中 → 同步脚本（阻塞）→ 继续解析\n           ↓\n        async 脚本（并行下载，下载完立即执行）\n           ↓\n    解析完成 → defer 脚本（按顺序执行）→ DOMContentLoaded\n           ↓\n    资源加载完成 → load 事件\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_2-javascript-执行与事件处理"}},[t._v("2. JavaScript 执行与事件处理")]),t._v(" "),s("p",[s("strong",[t._v("JavaScript 引擎执行流程：")])]),t._v(" "),s("p",[s("strong",[t._v("执行上下文（Execution Context）：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("全局执行上下文")]),t._v("：页面加载时创建")]),t._v(" "),s("li",[s("strong",[t._v("函数执行上下文")]),t._v("：函数调用时创建")])]),t._v(" "),s("p",[s("strong",[t._v("调用栈（Call Stack）：")])]),t._v(" "),s("ul",[s("li",[t._v("JavaScript 是单线程的，只有一个调用栈")]),t._v(" "),s("li",[t._v("函数调用会创建新的执行上下文并压入栈")]),t._v(" "),s("li",[t._v("函数执行完成后，执行上下文出栈")])]),t._v(" "),s("p",[s("strong",[t._v("事件循环（Event Loop）：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("调用栈 → 执行同步代码\n     ↓\n微任务队列（Microtask Queue）\n  - Promise.then()\n  - queueMicrotask()\n  - MutationObserver\n     ↓\n宏任务队列（Macrotask Queue）\n  - setTimeout()\n  - setInterval()\n  - I/O 操作\n  - UI 渲染\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[s("strong",[t._v("执行顺序：")])]),t._v(" "),s("ol",[s("li",[t._v("执行同步代码")]),t._v(" "),s("li",[t._v("执行所有微任务")]),t._v(" "),s("li",[t._v("执行一个宏任务")]),t._v(" "),s("li",[t._v("重复步骤 2-3")])]),t._v(" "),s("h1",{attrs:{id:"当面试官问我前端可以做的性能优化有哪些"}},[t._v("当面试官问我前端可以做的性能优化有哪些")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7194400984490049573#heading-41",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"回答思路"}},[t._v("回答思路")]),t._v(" "),s("p",[t._v("前端性能优化可以从"),s("strong",[t._v("性能指标、网络层面、渲染层面、代码层面、资源层面、构建层面")]),t._v("等多个维度进行优化。核心目标是"),s("strong",[t._v("减少资源体积、加快加载速度、提升渲染性能、优化用户体验")]),t._v("。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_0-web性能核心指标"}},[t._v("0.WEB性能核心指标")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("预备知识：别被指标缩写吓跑了")])])]),t._v(" "),s("blockquote",[s("p",[t._v("别被那一堆性能指标缩写整蒙了。对于前端来说，核心就关注三件事："),s("strong",[t._v("快不快（Loading）")]),t._v("、"),s("strong",[t._v("卡不卡（Interaction）")]),t._v("、"),s("strong",[t._v("稳不稳（Visual Stability）")])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_1-loading-加载-别让我等太久"}},[t._v("1. Loading（加载）：别让我等太久！")]),t._v(" "),s("p",[t._v("用户最怕面对一片白屏。这个阶段我们关注三个瞬间：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("指标（全称）")]),t._v(" "),s("th",[t._v("解释")]),t._v(" "),s("th",[t._v("典型场景")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("FP (First Paint)")])]),t._v(" "),s("td",[s("strong",[t._v('"屏幕亮了"')]),s("br"),t._v("浏览器开始渲染任何东西的时刻（哪怕只是背景色）")]),t._v(" "),s("td",[t._v('屏幕从纯白变成浅灰色，虽然啥内容都没有，但你知道"它活着"')])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("FCP (First Contentful Paint)")])]),t._v(" "),s("td",[s("strong",[t._v('"看到内容了"')]),s("br"),t._v("浏览器渲染出第一个内容（文字、图片、Logo）的时刻")]),t._v(" "),s("td",[t._v('页面上终于蹦出了"Loading..."文字或者导航栏 Logo')])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("LCP (Largest Contentful Paint)")]),t._v(" ⭐")]),t._v(" "),s("td",[s("strong",[t._v('"主角登场"')]),s("br"),t._v("视口内可见的最大图片或文本块渲染完成的时刻。这是 Google 最看重的加载指标")]),t._v(" "),s("td",[t._v("淘宝详情页的大图终于刷出来了，你终于看清商品长啥样了")])])])]),t._v(" "),s("p",[s("strong",[t._v("及格线")]),t._v("：FCP < 1.8s，LCP < 2.5s")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_2-interaction-交互-别卡得像-ppt"}},[t._v("2. Interaction（交互）：别卡得像 PPT！")]),t._v(" "),s("p",[t._v("东西加载出来了，用户开始点了，这时候最怕卡顿。这个阶段我们关注：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("指标（全称）")]),t._v(" "),s("th",[t._v("解释")]),t._v(" "),s("th",[t._v("典型场景")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("FID (First Input Delay)")]),t._v(" ⭐")]),t._v(" "),s("td",[s("strong",[t._v('"第一下没反应？"')]),s("br"),t._v("用户第一次与页面交互（点击按钮、链接）到浏览器真正开始处理这个事件的时间差")]),t._v(" "),s("td",[t._v('兴奋地去点"登录"按钮，结果点了没反应，过了1秒钟按钮才变色')])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("INP (Interaction to Next Paint)")])]),t._v(" "),s("td",[s("strong",[t._v('"越用越卡？"')]),s("br"),t._v("FID的升级版。它不仅看第一下，还看你浏览全程中所有交互的延迟，取最慢的那几次")]),t._v(" "),s("td",[t._v('每输入一个字，输入框都要卡顿一下才能显示出来，有种"粘滞感"')])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Long Task（长任务）")])]),t._v(" "),s("td",[s("strong",[t._v('"谁在堵路？"')]),s("br"),t._v("任何执行时间超过50ms的JavaScript任务")]),t._v(" "),s("td",[t._v("主线程就像单行道，大卡车（复杂计算）一堵，后面的点击事件全得排队")])])])]),t._v(" "),s("p",[s("strong",[t._v("及格线")]),t._v("：FID < 100ms，INP < 200ms，Long Task < 50ms")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("注")]),t._v('：长任务不光交互期会出现，加载时也常见；它会让白屏更久、把 TBT（总阻塞时间）拉高。我们归到"交互"里讲，是因为它最直接拖慢的是点击/输入的响应（FID、INP）。')])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_3-visual-stability-视觉稳定性-别乱动"}},[t._v("3. Visual Stability（视觉稳定性）：别乱动！")]),t._v(" "),s("p",[t._v("这可能是最让人抓狂的体验。这个阶段我们关注：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("指标（全称）")]),t._v(" "),s("th",[t._v("解释")]),t._v(" "),s("th",[t._v("典型场景")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("CLS (Cumulative Layout Shift)")]),t._v(" ⭐"),s("br"),t._v("累积布局偏移")]),t._v(" "),s("td",[s("strong",[t._v('"手滑点错了！"')]),s("br"),t._v("页面布局在加载过程中发生意外移动的程度")]),t._v(" "),s("td",[t._v('刚想点"取消"，顶部广告突然插队把页面往下挤，害你点成了"支付"。分数越低，页面越稳')])])])]),t._v(" "),s("p",[s("strong",[t._v("及格线")]),t._v("：CLS < 0.1")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"web-vitals-核心指标-google推荐"}},[t._v("Web Vitals 核心指标（Google推荐）")]),t._v(" "),s("p",[s("strong",[t._v("Core Web Vitals")]),t._v(" 是Google定义的三个最重要的用户体验指标，直接影响SEO排名：")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("LCP (Largest Contentful Paint)")]),t._v(" - 加载性能 ⭐")]),t._v(" "),s("li",[s("strong",[t._v("FID (First Input Delay)")]),t._v(" / "),s("strong",[t._v("INP (Interaction to Next Paint)")]),t._v(" - 交互性能 ⭐")]),t._v(" "),s("li",[s("strong",[t._v("CLS (Cumulative Layout Shift)")]),t._v(" - 视觉稳定性 ⭐")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"其他重要指标"}},[t._v("其他重要指标")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("指标（全称）")]),t._v(" "),s("th",[t._v("解释")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("TTFB (Time to First Byte)")])]),t._v(" "),s("td",[s("strong",[t._v("首字节时间")]),s("br"),t._v("从请求发送到接收到服务器第一个字节的时间")]),t._v(" "),s("td",[t._v("反映服务器响应速度，及格线 < 200ms")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("TTI (Time to Interactive)")])]),t._v(" "),s("td",[s("strong",[t._v("可交互时间")]),s("br"),t._v("页面完全可交互的时间点（所有资源加载完成，主线程空闲）")]),t._v(" "),s("td",[t._v("用户可以进行交互操作的时间，及格线 < 3.8s")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("DCL (DOMContentLoaded)")])]),t._v(" "),s("td",[s("strong",[t._v("DOM内容加载完成")]),s("br"),t._v("HTML文档完全加载和解析完成的时间")]),t._v(" "),s("td",[t._v("DOM树构建完成，但资源可能仍在加载")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("L (Load)")])]),t._v(" "),s("td",[s("strong",[t._v("页面完全加载")]),s("br"),t._v("页面所有资源（图片、样式表等）加载完成的时间")]),t._v(" "),s("td",[t._v("load事件触发时间")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("FPS (Frames Per Second)")])]),t._v(" "),s("td",[s("strong",[t._v("帧率")]),s("br"),t._v("每秒渲染的帧数")]),t._v(" "),s("td",[t._v("60fps为流畅，<30fps会感觉卡顿")])])])]),t._v(" "),s("h2",{attrs:{id:"一、网络层面优化"}},[t._v("一、网络层面优化")]),t._v(" "),s("h3",{attrs:{id:"_1-dns-预解析-dns-prefetch"}},[t._v("1. DNS 预解析（DNS Prefetch）")]),t._v(" "),s("p",[t._v("提前解析域名，减少后续请求的 DNS 查询时间。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://cdn.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-预连接-preconnect"}},[t._v("2. 预连接（Preconnect）")]),t._v(" "),s("p",[t._v("提前建立 TCP 连接和 TLS 握手，适用于需要频繁请求的第三方域名。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://api.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-预加载-preload"}},[t._v("3. 预加载（Preload）")]),t._v(" "),s("p",[t._v("提前加载关键资源，优先级高于普通资源。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font.woff2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font/woff2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("critical.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("main.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"_4-域名收敛"}},[t._v("4. 域名收敛")]),t._v(" "),s("p",[t._v("减少页面中域名的数量，从而减少 DNS 解析次数和连接建立时间。")]),t._v(" "),s("h3",{attrs:{id:"_5-使用-cdn-加速"}},[t._v("5. 使用 CDN 加速")]),t._v(" "),s("p",[t._v("将静态资源部署到 CDN，利用就近节点加速资源加载。")]),t._v(" "),s("h3",{attrs:{id:"_6-http-2-或-http-3"}},[t._v("6. HTTP/2 或 HTTP/3")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("HTTP/2")]),t._v("：多路复用、头部压缩、服务器推送、二进制传输")]),t._v(" "),s("li",[s("strong",[t._v("HTTP/3")]),t._v("：基于 QUIC 协议，解决队头阻塞，连接迁移")])]),t._v(" "),s("h3",{attrs:{id:"_7-优化-http-缓存策略"}},[t._v("7. 优化 HTTP 缓存策略")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("强缓存")]),t._v("："),s("code",[t._v("Cache-Control")]),t._v("、"),s("code",[t._v("Expires")])]),t._v(" "),s("li",[s("strong",[t._v("协商缓存")]),t._v("："),s("code",[t._v("ETag")]),t._v("、"),s("code",[t._v("Last-Modified")])]),t._v(" "),s("li",[t._v("静态资源设置长期缓存，HTML 设置不缓存或短期缓存")])]),t._v(" "),s("h3",{attrs:{id:"_8-资源压缩"}},[t._v("8. 资源压缩")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Gzip / Brotli 压缩")]),t._v("：减少传输体积")]),t._v(" "),s("li",[s("strong",[t._v("代码压缩")]),t._v("：JavaScript、CSS、HTML 压缩")]),t._v(" "),s("li",[s("strong",[t._v("图片压缩")]),t._v("：（WebP / AVIF）")])]),t._v(" "),s("h3",{attrs:{id:"_9-接口请求优化"}},[t._v("9. 接口请求优化")]),t._v(" "),s("ul",[s("li",[t._v("接口请求合并，减少请求次数")]),t._v(" "),s("li",[t._v("使用批量接口替代多个单独接口")]),t._v(" "),s("li",[t._v("合理使用请求缓存")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"二、渲染层面优化"}},[t._v("二、渲染层面优化")]),t._v(" "),s("h3",{attrs:{id:"_1-关键渲染路径优化"}},[t._v("1. 关键渲染路径优化")]),t._v(" "),s("p",[s("strong",[t._v("内联关键 CSS（Critical CSS）")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 首屏关键样式内联 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ... "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("延迟加载非关键 CSS")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("non-critical.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("media")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("print"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onload")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("media"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'all'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-javascript-加载优化"}},[t._v("2. JavaScript 加载优化")]),t._v(" "),s("p",[s("strong",[t._v("使用 defer 或 async")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- defer: 延迟执行，不阻塞 DOM 解析 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- async: 异步执行，下载完立即执行 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("analytics.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("动态加载脚本")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("async "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"_3-减少-dom-操作"}},[t._v("3. 减少 DOM 操作")]),t._v(" "),s("p",[s("strong",[t._v("批量修改 DOM")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 不好：多次触发回流")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 好：使用 DocumentFragment")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fragment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" div "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  fragment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[s("strong",[t._v("避免强制同步布局")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 不好：强制同步布局")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发回流")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 好：先读取后修改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_4-使用虚拟列表"}},[t._v("4. 使用虚拟列表")]),t._v(" "),s("p",[t._v("对于长列表，只渲染可见区域，减少 DOM 节点数量。")]),t._v(" "),s("h3",{attrs:{id:"_5-服务端渲染-ssr"}},[t._v("5. 服务端渲染（SSR）")]),t._v(" "),s("p",[t._v("使用 Next.js、Nuxt.js 等服务端渲染框架，提升首屏加载速度。")]),t._v(" "),s("h3",{attrs:{id:"_6-骨架屏和-loading"}},[t._v("6. 骨架屏和 Loading")]),t._v(" "),s("p",[t._v("在内容加载前显示骨架屏或 Loading 图标，提升用户体验。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"三、javascript-代码优化"}},[t._v("三、JavaScript 代码优化")]),t._v(" "),s("h3",{attrs:{id:"_1-事件委托-event-delegation"}},[t._v("1. 事件委托（Event Delegation）")]),t._v(" "),s("p",[t._v("减少事件监听器数量，提升性能。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 不好：为每个元素绑定事件")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.item'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 好：事件委托")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("matches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.item'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"_2-防抖-debounce-和节流-throttle"}},[t._v("2. 防抖（Debounce）和节流（Throttle）")]),t._v(" "),s("p",[s("strong",[t._v("防抖")]),t._v("：适用于搜索输入、窗口 resize")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debounce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wait")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    timeout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[s("strong",[t._v("节流")]),t._v("：适用于滚动事件、鼠标移动")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("throttle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wait")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" lastTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" now "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("now "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" lastTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      lastTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"_3-使用-web-worker"}},[t._v("3. 使用 Web Worker")]),t._v(" "),s("p",[t._v("将复杂计算放到 Web Worker 中执行，避免阻塞主线程。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" largeData "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算结果:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// worker.js")]),t._v("\nself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("heavyCalculation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"_4-计算结果缓存"}},[t._v("4. 计算结果缓存")]),t._v(" "),s("p",[t._v("使用缓存减少重复计算，如 Vue 的 "),s("code",[t._v("computed")]),t._v("、React 的 "),s("code",[t._v("useMemo")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_5-动画优化"}},[t._v("5. 动画优化")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("优先使用 CSS3 动画")]),t._v("："),s("code",[t._v("transform")]),t._v("、"),s("code",[t._v("opacity")]),t._v("（只触发合成，不触发回流和重绘）")]),t._v(" "),s("li",[s("strong",[t._v("使用 "),s("code",[t._v("requestAnimationFrame")])]),t._v("：优化 JavaScript 动画")]),t._v(" "),s("li",[s("strong",[t._v("避免使用 JS 动画")]),t._v("：CSS3 动画和 Canvas 动画性能更好")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 使用 requestAnimationFrame")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("animate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transform "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("translateX(")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("px)")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("animate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("animate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_6-避免内存泄漏"}},[t._v("6. 避免内存泄漏")]),t._v(" "),s("ul",[s("li",[t._v("及时清理事件监听器")]),t._v(" "),s("li",[t._v("清理定时器（"),s("code",[t._v("setTimeout")]),t._v("、"),s("code",[t._v("setInterval")]),t._v("）")]),t._v(" "),s("li",[t._v("避免闭包持有大对象引用")]),t._v(" "),s("li",[t._v("清理 DOM 引用")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"四、css-优化-减少重绘和回流"}},[t._v("四、CSS 优化（减少重绘和回流）")]),t._v(" "),s("h3",{attrs:{id:"_1-避免触发回流-reflow"}},[t._v("1. 避免触发回流（Reflow）")]),t._v(" "),s("p",[s("strong",[t._v("使用 "),s("code",[t._v("transform")]),t._v(" 代替修改位置和尺寸")])]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ❌ 不好：触发回流 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".element")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("top")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ✅ 好：只触发合成 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".element")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[s("strong",[t._v("使用 "),s("code",[t._v("absolute")]),t._v(" 或 "),s("code",[t._v("fixed")]),t._v(" 定位")]),t._v("\n脱离文档流，减少回流影响范围。")]),t._v(" "),s("h3",{attrs:{id:"_2-避免触发重绘-repaint"}},[t._v("2. 避免触发重绘（Repaint）")]),t._v(" "),s("p",[s("strong",[t._v("批量修改样式")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 不好：多次触发重绘")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("border "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1px solid black'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 好：一次性修改")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'new-style'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_3-使用-css3-硬件加速"}},[t._v("3. 使用 CSS3 硬件加速")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".element")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateZ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 或 translate3d(0,0,0) */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("will-change")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" transform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"_4-优化选择器"}},[t._v("4. 优化选择器")]),t._v(" "),s("ul",[s("li",[t._v("避免过于复杂的选择器（如 "),s("code",[t._v("div > ul > li > a > span")]),t._v("）")]),t._v(" "),s("li",[t._v("CSS 选择器从右到左匹配，优先使用类选择器")])]),t._v(" "),s("h3",{attrs:{id:"_5-减少-css-文件数量和大小"}},[t._v("5. 减少 CSS 文件数量和大小")]),t._v(" "),s("ul",[s("li",[t._v("合并 CSS 文件")]),t._v(" "),s("li",[t._v("移除未使用的 CSS")]),t._v(" "),s("li",[t._v("使用 CSS 压缩工具")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"五、资源优化"}},[t._v("五、资源优化")]),t._v(" "),s("h3",{attrs:{id:"_1-图片优化"}},[t._v("1. 图片优化")]),t._v(" "),s("p",[s("strong",[t._v("选择合适的图片格式")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("格式")]),t._v(" "),s("th",[t._v("特点")]),t._v(" "),s("th",[t._v("使用场景")]),t._v(" "),s("th",[t._v("优缺点")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("JPEG / JPG")]),t._v(" "),s("td",[t._v("位图格式，有损压缩，色彩表现好")]),t._v(" "),s("td",[t._v("照片、banner、背景图")]),t._v(" "),s("td",[t._v("优点：色彩丰富、文件小、兼容性好；缺点：有损压缩、不可透明、不支持动画")])]),t._v(" "),s("tr",[s("td",[t._v("PNG")]),t._v(" "),s("td",[t._v("位图格式，无损压缩，支持透明")]),t._v(" "),s("td",[t._v("Logo、icon、需要透明的图片")]),t._v(" "),s("td",[t._v("优点：无损、支持透明；缺点：体积大、不支持动画")])]),t._v(" "),s("tr",[s("td",[t._v("GIF")]),t._v(" "),s("td",[t._v("位图格式，支持动画和透明")]),t._v(" "),s("td",[t._v("简单动图、表情包")]),t._v(" "),s("td",[t._v("优点：支持动画、兼容性好；缺点：仅支持 256 色、画质差")])]),t._v(" "),s("tr",[s("td",[t._v("WebP")]),t._v(" "),s("td",[t._v("支持有损/无损压缩，支持透明和动画")]),t._v(" "),s("td",[t._v("替代 JPEG / PNG / GIF")]),t._v(" "),s("td",[t._v("优点：压缩率高、性能好；缺点：老旧浏览器不支持，需要回退格式")])]),t._v(" "),s("tr",[s("td",[t._v("SVG")]),t._v(" "),s("td",[t._v("矢量图，可无限缩放")]),t._v(" "),s("td",[t._v("图标、Logo、图表")]),t._v(" "),s("td",[t._v("优点：无损缩放、文件小、可动画；缺点：不适合复杂照片")])]),t._v(" "),s("tr",[s("td",[t._v("AVIF")]),t._v(" "),s("td",[t._v("新一代图片格式，基于 AV1")]),t._v(" "),s("td",[t._v("高性能网站")]),t._v(" "),s("td",[t._v("优点：比 WebP 压缩率更高；缺点：兼容性较差")])])])]),t._v(" "),s("p",[s("strong",[t._v("图片优化策略")])]),t._v(" "),s("ul",[s("li",[t._v("图片压缩：使用工具压缩图片体积")]),t._v(" "),s("li",[t._v("使用雪碧图（CSS Sprites）：合并小图标，减少请求次数")]),t._v(" "),s("li",[t._v("使用 iconfont：图标字体，体积小、可缩放")]),t._v(" "),s("li",[t._v("小图片转 base64：减少 HTTP 请求（注意会增加 HTML 体积）")]),t._v(" "),s("li",[t._v("图片懒加载：只加载可见区域的图片")]),t._v(" "),s("li",[t._v("响应式图片：使用 "),s("code",[t._v("srcset")]),t._v(" 和 "),s("code",[t._v("sizes")]),t._v(" 属性")]),t._v(" "),s("li",[t._v("渐变色使用 CSS 代替图片")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 图片懒加载 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("placeholder.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("real-image.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("loading")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("lazy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 响应式图片 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("small.jpg 480w, medium.jpg 768w, large.jpg 1200w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("sizes")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(max-width: 480px) 100vw, (max-width: 768px) 50vw, 33vw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("medium.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_2-字体优化"}},[t._v("2. 字体优化")]),t._v(" "),s("ul",[s("li",[t._v("字体子集化：只包含使用的字符")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("font-display: swap")]),t._v("：避免字体加载阻塞渲染")]),t._v(" "),s("li",[t._v("预加载关键字体")])]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyFont'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token url"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'font.woff2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'woff2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" swap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 字体加载期间显示备用字体 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("hr"),t._v(" "),s("h2",{attrs:{id:"六、构建打包优化"}},[t._v("六、构建打包优化")]),t._v(" "),s("h3",{attrs:{id:"_1-代码分割-code-splitting"}},[t._v("1. 代码分割（Code Splitting）")]),t._v(" "),s("p",[t._v("按需加载，减少初始包体积。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路由懒加载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Home "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" About "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./About'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 组件懒加载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HeavyComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./HeavyComponent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_2-tree-shaking"}},[t._v("2. Tree Shaking")]),t._v(" "),s("p",[t._v("移除未使用的代码，支持 ES6 模块的打包工具（Webpack、Rollup、Vite）。")]),t._v(" "),s("h3",{attrs:{id:"_3-代码压缩"}},[t._v("3. 代码压缩")]),t._v(" "),s("ul",[s("li",[t._v("JavaScript：UglifyJS、Terser")]),t._v(" "),s("li",[t._v("CSS：cssnano")]),t._v(" "),s("li",[t._v("HTML：html-minifier")])]),t._v(" "),s("h3",{attrs:{id:"_4-公共代码提取"}},[t._v("4. 公共代码提取")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 配置")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("optimization")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("splitChunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'all'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheGroups")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vendor")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("[\\\\/]node_modules[\\\\/]")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vendors'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h3",{attrs:{id:"_5-cdn-加载第三方模块"}},[t._v("5. CDN 加载第三方模块")]),t._v(" "),s("p",[t._v("将 "),s("code",[t._v("node_modules")]),t._v(" 中的第三方库通过 CDN 加载，减少打包体积")]),t._v(" "),s("h3",{attrs:{id:"_6-多线程打包"}},[t._v("6. 多线程打包")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("thread-loader")]),t._v(" 或 "),s("code",[t._v("happypack")]),t._v(" 加速构建。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"七、框架特定优化"}},[t._v("七、框架特定优化")]),t._v(" "),s("h3",{attrs:{id:"react-优化"}},[t._v("React 优化")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("避免不必要的 render")])]),t._v(" "),s("ul",[s("li",[t._v("使用 "),s("code",[t._v("React.memo")]),t._v("、"),s("code",[t._v("React.PureComponent")]),t._v("、"),s("code",[t._v("shouldComponentUpdate")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("避免内联函数和对象")])])])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 不好")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("button1")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅ 好")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("button1")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[s("strong",[t._v("使用 Fragment 减少层级")])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React.Fragment")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child1")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child2")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React.Fragment")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("循环使用 key，但不要用 index")])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Item")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Hook 优化")])]),t._v(" "),s("ul",[s("li",[t._v("使用 "),s("code",[t._v("useMemo")]),t._v(" 缓存计算结果")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("useCallback")]),t._v(" 缓存函数")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("代码分割和懒加载")])])])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./MyComponent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React.Suspense")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fallback")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spinner")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n     ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyComponent")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React.Suspense")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"vue-优化"}},[t._v("Vue 优化")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("v-for 添加 key")])]),t._v(" "),s("div",{staticClass:"language-vue line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item in list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item.id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ item.name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("路由懒加载")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code")]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])]),t._v(" "),s("p",[t._v("const Home = () => import('./Home.vue');")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n3. **第三方插件按需引入**\n   ```javascript\n   import { Button } from 'element-ui'; // 而不是 import ElementUI from 'element-ui'\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[s("strong",[t._v("合理使用 computed 和 watch")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("computed")]),t._v("：缓存计算结果")]),t._v(" "),s("li",[s("code",[t._v("watch")]),t._v("：监听数据变化")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("v-for 和 v-if 不要同时使用")])]),t._v(" "),s("div",{staticClass:"language-vue line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- ❌ 不好 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item in list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item.visible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ item.name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- ✅ 好 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item in visibleList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item.id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ item.name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("使用 keep-alive 缓存组件")])]),t._v(" "),s("div",{staticClass:"language-vue line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("keep-alive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("currentComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("keep-alive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("及时销毁事件和定时器")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onBeforeUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  bus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$off")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"八、首屏优化策略"}},[t._v("八、首屏优化策略")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("使用路由懒加载")]),t._v("：按需加载路由组件")]),t._v(" "),s("li",[s("strong",[t._v("非首屏组件使用异步组件")]),t._v("：延迟加载非关键组件")]),t._v(" "),s("li",[s("strong",[t._v("首屏不重要的组件延迟加载")]),t._v("：使用 "),s("code",[t._v("IntersectionObserver")]),t._v(" 或滚动加载")]),t._v(" "),s("li",[s("strong",[t._v("静态资源放在 CDN 上")]),t._v("：加速资源加载")]),t._v(" "),s("li",[s("strong",[t._v("减少首屏 JS、CSS 等资源文件的大小")]),t._v("：代码分割、压缩")]),t._v(" "),s("li",[s("strong",[t._v("使用服务端渲染（SSR）")]),t._v("：提升首屏渲染速度")]),t._v(" "),s("li",[s("strong",[t._v("减少 DOM 的数量和层级")]),t._v("：简化 HTML 结构")]),t._v(" "),s("li",[s("strong",[t._v("使用精灵图")]),t._v("：减少图片请求次数")]),t._v(" "),s("li",[s("strong",[t._v("显示 Loading 或骨架屏")]),t._v("：提升用户体验")]),t._v(" "),s("li",[s("strong",[t._v("开启 Gzip 压缩")]),t._v("：减少传输体积")]),t._v(" "),s("li",[s("strong",[t._v("图片懒加载")]),t._v("：只加载可见区域的图片")]),t._v(" "),s("li",[s("strong",[t._v("内联关键 CSS")]),t._v("：减少首屏渲染阻塞")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"九、性能监控工具"}},[t._v("九、性能监控工具")]),t._v(" "),s("h3",{attrs:{id:"_1-chrome-devtools"}},[t._v("1. Chrome DevTools")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Performance")]),t._v("：可查看性能指标，并有网页快照")]),t._v(" "),s("li",[s("strong",[t._v("Network")]),t._v("：可以查看各个资源的加载时间")]),t._v(" "),s("li",[s("strong",[t._v("Lighthouse")]),t._v("：性能评测工具")])]),t._v(" "),s("h3",{attrs:{id:"_2-lighthouse"}},[t._v("2. Lighthouse")]),t._v(" "),s("p",[t._v("非常流行的第三方性能评测工具，支持移动端和 PC，提供性能评分和优化建议。")]),t._v(" "),s("h3",{attrs:{id:"_3-webpagetest"}},[t._v("3. WebPageTest")]),t._v(" "),s("p",[t._v("在线性能测试工具，可以模拟不同网络环境和设备。")]),t._v(" "),s("h3",{attrs:{id:"_4-pagespeed-insights"}},[t._v("4. PageSpeed Insights")]),t._v(" "),s("p",[t._v("Google 提供的页面速度分析工具。")]),t._v(" "),s("hr")])}),[],!1,null,null,null);s.default=e.exports}}]);